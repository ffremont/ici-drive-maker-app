(this["webpackJsonpmaker-app"]=this["webpackJsonpmaker-app"]||[]).push([[0],{110:function(e,t,a){e.exports=a.p+"static/media/google.752536d8.svg"},111:function(e,t,a){e.exports=a.p+"static/media/mail.59ed2e77.svg"},115:function(e,t,a){e.exports=a.p+"static/media/ici-drive-icon.546ec8b4.png"},116:function(e,t,a){e.exports=a.p+"static/media/ici-drive-banner.117fc591.png"},147:function(e,t,a){e.exports=a(187)},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},181:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t){Array.prototype.sortBy=function(e,t){var a=arguments;this.sort((function(e,t){for(var n=0,r=0;r<a.length&&0===n;r+=2){var i=a[r];n=e[i]<t[i]?-1:e[i]>t[i]?1:0,n*=a[r+1]?-1:1}return n}))}},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),o=a.n(i),l=a(47),s=(a(152),a(12)),c=a(13),u=a(26),m=a(25),d=(a(153),a(42)),p=a(133),f=a(289),h=a(188),b=a(250),E=(a(154),a(296)),v=a(256),g=a(255),y=a(114),k=a.n(y),O=a(34),C=a(254),w=a(110),T=a.n(w),S=a(111),N=a.n(S),x=a(249),j=a(112),P=a.n(j),R=a(134),D=new(function(){function e(){var t=this;Object(s.a)(this,e),this.subRequest=new R.a,this.subResponse=new R.a,this.config=void 0,this.idToken=null,this.axios=void 0,setTimeout((function(){W.subToken.subscribe((function(e){return t.idToken=e}))}),0),this.config={responseType:"json",timeout:15e3,transformRequest:[function(e,a){return a["Content-Type"]="application/json",null!==t.idToken&&(a.Authorization="Bearer ".concat(t.idToken)),t.subRequest.next({data:e,headers:a}),JSON.stringify(e)}],transformResponse:[function(e,a){return t.subResponse.next({data:e,headers:a}),e}]},this.axios=P.a.create(this.config)}return Object(c.a)(e,[{key:"subOnRequest",value:function(e){return this.subRequest.subscribe(e)}},{key:"subOnResponse",value:function(e){return this.subResponse.subscribe(e)}}]),e}()),A=a(55),I={cgu:"https://docs.google.com/document/d/e/2PACX-1vRxz61BpPZL-YJXX2E6tvdYsI0PG1vxv1eGjxQ7TMfqififiO-Snb5pZU21bkjZgTHyENu3I5nFzxRZ/pub",cgr:"http://google.fr",support:"https://forms.gle/q4KYieunhwWVn1BR6",baseURL:"https://app.ici-drive.fr",fcmPublicVapidKey:"BO7yESbBXsx7ddVzYqvkNpWf-3S6sjqQxEoolQQ1OG02D0-nmrpowEsYRHuoGEzT4w5Np6Gdwto5FiLsS--sONw",API:{self:function(){return"".concat("/api-mock","/makers/self.json")},orders:function(e){return"".concat("/api-mock","/my-orders.json?ref=").concat(e)}},categories:[{label:"Viandes",id:"viandes"},{label:"Oeufs",id:"oeufs"},{label:"Laitiers",id:"laitiers"},{label:"Epiceries",id:"epiceries"},{label:"Fruits / L\xe9gumes",id:"fruit-leg"},{label:"Mer",id:"mer"},{label:"Glaces",id:"glace"},{label:"Boissons",id:"boissons"}]},M={cgu:"https://docs.google.com/document/d/e/2PACX-1vRxz61BpPZL-YJXX2E6tvdYsI0PG1vxv1eGjxQ7TMfqififiO-Snb5pZU21bkjZgTHyENu3I5nFzxRZ/pub",cgr:"",support:"https://forms.gle/q4KYieunhwWVn1BR6",baseURL:"https://app.ici-drive.fr",fcmPublicVapidKey:"BO7yESbBXsx7ddVzYqvkNpWf-3S6sjqQxEoolQQ1OG02D0-nmrpowEsYRHuoGEzT4w5Np6Gdwto5FiLsS--sONw",API:{self:function(){return"".concat("/api","/admin/makers/self")},orders:function(e){return"".concat("/api","/admin/my-orders/").concat(e||"")}},categories:[{label:"Viandes",id:"viandes"},{label:"Oeufs",id:"oeufs"},{label:"Laitiers",id:"laitiers"},{label:"Epiceries",id:"epiceries"},{label:"Fruits / L\xe9gumes",id:"fruit-leg"},{label:"Mer",id:"mer"},{label:"Glaces",id:"glace"},{label:"Boissons",id:"boissons"}]},L="prod"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?M:I,_=Object(A.a)({},L),F=new(function(){function e(){Object(s.a)(this,e),this.sub=new x.a(null)}return Object(c.a)(e,[{key:"set",value:function(e){this.sub.next(e)}},{key:"subscribe",value:function(e){return this.sub.subscribe(e)}},{key:"load",value:function(){var e=this;D.axios.get(_.API.self()).then((function(t){e.set(t.data)})).catch((function(e){console.error(e)}))}}]),e}()),W=new(function(){function e(){Object(s.a)(this,e),this.subToken=new x.a(null),this.isAuth=!1}return Object(c.a)(e,[{key:"authenticated",value:function(){this.isAuth||F.load(),this.isAuth=!0}},{key:"setIdToken",value:function(e){this.subToken.next(e)}},{key:"signout",value:function(){this.isAuth=!1,this.subToken.next(null),window.firebase&&window.firebase.auth().signOut()}}]),e}());function U(){}U.prototype.addProfile=function(e){},U.prototype.addScope=function(e){},U.prototype.setCustomParameters=function(e){};var G=function(){function e(){var t=this;Object(s.a)(this,e),this.isSigned=!0,this.authFns=[],this.userMock={email:"ff.fremont.florent@gmail.com"},this.idTokenMock="azerty",this.authDelayMock=2e3,this.getIdTokenPromise=void 0,this.getIdTokenPromiseResolve=void 0,this.getIdTokenPromise=new Promise((function(e){t.getIdTokenPromiseResolve=e}))}return Object(c.a)(e,[{key:"init",value:function(){return this.auth.FacebookAuthProvider=function(){return U},this.auth.EmailAuthProvider=function(){return U},this.auth.GoogleAuthProvider=function(){return U},this}},{key:"messaging",value:function(){return{usePublicVapidKey:function(){},onMessage:function(){},onTokenRefresh:function(){}}}},{key:"auth",value:function(){var e=this;return{signOut:function(){console.log("signOut")},onAuthStateChanged:function(t){return e.authFns.push(t),e.isSigned?setTimeout((function(){e.authFns.forEach((function(t){return t(e.userMock)})),e.getIdTokenPromiseResolve(e.idTokenMock)}),e.authDelayMock):e.authFns.forEach((function(e){return e(null)})),function(){e.authFns.splice(e.authFns.findIndex((function(e){return e===t})),1)}},signInWithRedirect:function(t){setTimeout((function(){e.authFns.forEach((function(t){return t(e.userMock)})),e.getIdTokenPromiseResolve(e.idTokenMock)}),1e3)},currentUser:{getIdToken:function(){return e.getIdTokenPromise}}}}}]),e}();"prod"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE&&(window.firebase=(new G).init());var V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).unregisterAuthObserver=null,e.state={loading:!0,isSignedIn:!1,from:"/"},e}return Object(c.a)(a,[{key:"sign",value:function(e){e.addScope("profile"),e.addScope("email"),window.firebase.auth().signInWithRedirect(e)}},{key:"signEmail",value:function(){this.sign("prod"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?new window.firebase.auth.EmailAuthProvider:new(window.firebase.auth.EmailAuthProvider()))}},{key:"signGoogle",value:function(){var e="prod"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?new window.firebase.auth.GoogleAuthProvider:new(window.firebase.auth.GoogleAuthProvider());this.sign(e)}},{key:"componentDidMount",value:function(){this.registerOnFirebase(),this.props.location&&(this.props.location.state?this.setState({from:this.props.location.state.fromPathname}):this.setState({from:"/"}))}},{key:"registerOnFirebase",value:function(){var e=this;this.unregisterAuthObserver=window.firebase.auth().onAuthStateChanged((function(t){e.setState({loading:!1,isSignedIn:!!t}),t&&(window.firebase.auth().currentUser.getIdToken().then((function(e){return W.setIdToken(e)})),W.authenticated())}))}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver&&this.unregisterAuthObserver()}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement(b.a,{className:"wait-auth"})):this.state.isSignedIn?r.a.createElement(d.a,{to:{pathname:this.state.from,state:{from:"/login"}}}):r.a.createElement("div",{className:"login"},r.a.createElement(C.a,{component:"main",maxWidth:"xs"},r.a.createElement(g.a,null),r.a.createElement("div",{className:"paper"},r.a.createElement(E.a,{className:"avatar"},r.a.createElement(k.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},"Connexion"),r.a.createElement(v.a,{type:"button",fullWidth:!0,size:"large",variant:"contained",color:"default",onClick:function(){return e.signGoogle()},className:"provider google"},r.a.createElement("img",{alt:"google",src:T.a})," Connexion par Google"),r.a.createElement(v.a,{type:"button",fullWidth:!0,color:"primary",size:"large",onClick:function(){return e.signEmail()},variant:"contained",className:"provider email"},r.a.createElement("img",{alt:"mail",src:N.a})," Connexion par email"))))}}]),a}(r.a.Component),H=a(135),B=function(e){e.children,e.component;var t=Object(H.a)(e,["children","component"]),a=e.component;return r.a.createElement(d.b,Object.assign({},t,{render:function(e){var t=e.location,n=e.history,i=e.match;return W.isAuth?r.a.createElement(a,{location:t,history:n,match:i}):r.a.createElement(d.a,{to:{pathname:"/login",state:{fromPathname:t.pathname}}})}}))},q=(a(177),a(32)),z=a(257),K=a(297),Y=a(263),Q=a(264),J=a(265),X=a(122),Z=a.n(X),$=a(73),ee=a.n($),te=a(299),ae=a(259),ne=a(260),re=a(261),ie=a(262),oe=a(74),le=a.n(oe),se=a(121),ce=a.n(se),ue=a(117),me=a.n(ue),de=a(115),pe=a.n(de),fe=a(116),he=a.n(fe),be=(a(178),a(123)),Ee=a.n(be),ve=a(120),ge=a.n(ve),ye=a(118),ke=a.n(ye),Oe=a(119),Ce=a.n(Oe),we=Object(z.a)((function(e){return Object(K.a)({root:{flexGrow:1},firstButton:{marginRight:e.spacing(2)},appBar:{color:e.palette.grey[900],background:e.palette.common.white},title:{flexGrow:1,paddingRight:50},list:{width:250},fullList:{width:"auto"}})})),Te=function(e){var t=we(),a=Object(n.useState)("full"),i=Object(q.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(!1),c=Object(q.a)(s,1)[0],u=Object(n.useState)(""),m=Object(q.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),h=Object(q.a)(f,2),b=h[0],E=h[1];r.a.useEffect((function(){l(e.mode)}),[e.mode]),Object(n.useEffect)((function(){var e=F.subscribe((function(e){e&&e.email&&p(e.email.substr(0,e.email.indexOf("@")))}));return function(){e.unsubscribe()}}));return r.a.createElement("div",{className:t.root},r.a.createElement(te.a,{anchor:"left",open:b,onClose:function(){return E(!1)}},r.a.createElement(ae.a,{className:"drawer-list"},d&&r.a.createElement(ne.a,{selected:!0,button:!0,key:"connected"},r.a.createElement(re.a,null,r.a.createElement(ee.a,null)),r.a.createElement(ie.a,{primary:"Connect\xe9",secondary:d})),r.a.createElement(ne.a,{button:!0,key:"catalog",onClick:function(){return e.history.push("/products")}},r.a.createElement(re.a,null,r.a.createElement(me.a,null)),r.a.createElement(ie.a,{primary:"Catalogue produits"})),r.a.createElement(ne.a,{button:!0,key:"point",onClick:function(){return e.history.push("/my-profil")}},r.a.createElement(re.a,null,r.a.createElement(ke.a,null)),r.a.createElement(ie.a,{primary:"Retrait & livraison"})),r.a.createElement(ne.a,{button:!0,key:"account",onClick:function(){return e.history.push("/my-profil")}},r.a.createElement(re.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(ie.a,{primary:"Mon drive"})),r.a.createElement(ne.a,{button:!0,key:"support",onClick:function(){return window.open(_.support)}},r.a.createElement(re.a,null,r.a.createElement(le.a,null)),r.a.createElement(ie.a,{primary:"Support",secondary:"D\xe9clarer un incident"})),r.a.createElement(ne.a,{button:!0,key:"mentions"},r.a.createElement(re.a,null,r.a.createElement(ge.a,null)),r.a.createElement(ie.a,{primary:"Mentions",secondary:"CGU, CGR, ..."})),d&&r.a.createElement(ne.a,{button:!0,key:"logout",onClick:function(){window.confirm("Voulez-vous d\xe9connecter votre appareil de votre compte ?")&&(W.signout(),window.location.reload())}},r.a.createElement(re.a,null,r.a.createElement(ce.a,null)),r.a.createElement(ie.a,{primary:"Se d\xe9connecter",secondary:"Dissocier cet appareil"})))),r.a.createElement(Y.a,{position:"fixed",className:t.appBar},r.a.createElement(Q.a,null,"full"===o&&r.a.createElement(J.a,{edge:"start",className:t.firstButton,onClick:function(){return E(!0)},color:"inherit","aria-label":"menu"},r.a.createElement(Z.a,null)),"full"!==o&&r.a.createElement(J.a,{edge:"start",className:t.firstButton,onClick:function(){return e.history.goBack()},color:"inherit","aria-label":"pr\xe9c\xe9dent"},r.a.createElement(Ee.a,null)),"full"===o&&r.a.createElement(O.a,{variant:"h6",className:t.title},r.a.createElement("img",{alt:"icon ici drive",className:"ici-drive-icon",src:he.a})),["light"].indexOf(o)>-1&&r.a.createElement(O.a,{variant:"h6",align:"center",className:t.title},r.a.createElement("img",{alt:"icon ici drive",className:"ici-drive-icon",src:pe.a})),["my-orders"].indexOf(o)>-1&&r.a.createElement(O.a,{variant:"h6",align:"center",className:t.title},"Mes r\xe9servations"),["catalog"].indexOf(o)>-1&&r.a.createElement(O.a,{variant:"h6",align:"center",className:t.title},"Catalogue"),["product-edit"].indexOf(o)>-1&&r.a.createElement(O.a,{variant:"h6",align:"center",className:t.title},"Editer produit"),["product-new"].indexOf(o)>-1&&r.a.createElement(O.a,{variant:"h6",align:"center",className:t.title},"Ajouter produit"),c&&r.a.createElement("div",null,r.a.createElement(J.a,{"aria-label":"Mes r\xe9servations","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit"},r.a.createElement(ee.a,null))))))},Se=a(124),Ne=a.n(Se);var xe,je=function(e){return r.a.createElement("div",{className:"no-match"},r.a.createElement(Te,{mode:"light",history:e.history}),r.a.createElement("div",{className:"area"},r.a.createElement(Ne.a,null),r.a.createElement(O.a,{variant:"h4"},"Page introuvable")))},Pe=new(function(){function e(){Object(s.a)(this,e),this.fcm="",this.lastFcm="",this.messaging=void 0,this.isInit=!1}return Object(c.a)(e,[{key:"init",value:function(){this.isInit||(this.isInit=!0,window.firebase&&(this.messaging=window.firebase.messaging(),this.messaging.usePublicVapidKey(_.fcmPublicVapidKey),this.messaging.onMessage(this.onMessage.bind(this)),this.messaging.onTokenRefresh(this.onTokenRefresh.bind(this))),setTimeout((function(){}),0))}},{key:"onTokenRefresh",value:function(){var e=this;this.messaging.getToken().then((function(t){console.log("Token refreshed."),e.fcm=t})).catch((function(e){console.log("Unable to retrieve refreshed token ",e)}))}},{key:"onMessage",value:function(e){console.log("Message received. ",e)}}]),e}()),Re=a(40),De=a.n(Re),Ae=(a(180),a(181),a(86)),Ie=a.n(Ae),Me=a(125),Le=function(){function e(){Object(s.a)(this,e),this.sub=new x.a([])}return Object(c.a)(e,[{key:"set",value:function(e){this.sub.next(e)}},{key:"subscribe",value:function(e){return this.sub.subscribe(e)}},{key:"load",value:function(e){var t=this;return D.axios.get(_.API.orders(e)).then((function(e){return Array.isArray(e.data)?t.set(e.data):t.set([e.data]),e.data}))}}],[{key:"update",value:function(){var e=Object(Me.a)(Ie.a.mark((function e(t){return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.axios.put(_.API.orders(t.id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_e=new Le;!function(e){e.PENDING="pending",e.VERIFIED="verified",e.REFUSED="refused",e.CONFIRMED="confirmed",e.CANCELLED="cancelled"}(xe||(xe={}));var Fe=a(267),We=a(4),Ue=a(266),Ge=a(79),Ve=a(80),He=a(268),Be=a(126),qe=a.n(Be),ze=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).statusLabel={},e.state={orders:[]},e.sub=null,e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}},{key:"componentDidMount",value:function(){var e=this;this.statusLabel[xe.PENDING]={label:"A v\xe9rifier",color:this.props.classes.orange},this.statusLabel[xe.CANCELLED]={label:"Annul\xe9e",color:this.props.classes.grey},this.statusLabel[xe.VERIFIED]={label:"En attente de confirmation",color:this.props.classes.orange},this.statusLabel[xe.CONFIRMED]={label:"Confirm\xe9e",color:this.props.classes.green},this.statusLabel[xe.REFUSED]={label:"Refus\xe9e",color:this.props.classes.grey},this.sub=_e.subscribe((function(t){console.log("MyOrders > ordersStore.sub ",t),t&&t.sortBy("created",!0),e.setState({orders:t||[]})})),_e.load()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"my-orders"},r.a.createElement(Te,{mode:"full",history:this.props.history}),r.a.createElement("div",{className:"orders"},r.a.createElement(ae.a,null,this.state.orders.map((function(t,a){return r.a.createElement(ne.a,{key:"li_".concat(a),onClick:function(){return e.props.history.push("/my-orders/".concat(t.id))}},r.a.createElement(Fe.a,null,r.a.createElement(E.a,{className:e.statusLabel[t.status].color},e.statusLabel[t.status].label.substr(0,1).toUpperCase())),r.a.createElement(ie.a,{primary:e.statusLabel[t.status].label+" (".concat(t.total,"\u20ac)"),secondary:De.a(t.created).format("ddd D MMM \xe0 HH:mm")}),r.a.createElement(He.a,null,r.a.createElement(J.a,{edge:"end","aria-label":"next"},r.a.createElement(qe.a,null))))})))))}}]),a}(r.a.Component),Ke=Object(We.a)((function(e){return{orange:{color:e.palette.getContrastText(Ue.a[500]),backgroundColor:Ue.a[500]},grey:{color:e.palette.getContrastText(Ge.a[500]),backgroundColor:Ge.a[500]},green:{color:e.palette.getContrastText(Ve.a[500]),backgroundColor:Ve.a[500]}}}))(ze),Ye=(a(183),a(275)),Qe=a(290),Je=a(291),Xe=a(295),Ze=a(282),$e=a(277),et=a(281),tt=a(280),at=a(276),nt=a(278),rt=a(279),it=a(59),ot=a.n(it),lt=a(294),st=a(298),ct=a(292),ut=a(87),mt=a.n(ut),dt=a(78),pt=a.n(dt),ft=a(76),ht=a.n(ft),bt=a(127),Et=a.n(bt),vt=a(128),gt=a.n(vt),yt=a(269),kt=a(274),Ot=a(271),Ct=a(272),wt=a(270);function Tt(e){var t=r.a.useState(!1),a=Object(q.a)(t,2),n=a[0],i=a[1],o=r.a.useState(""),l=Object(q.a)(o,2),s=l[0],c=l[1];r.a.useEffect((function(){i(e.open)}),[e.open]);var u=function(){i(!1),e.onClose()};return r.a.createElement(yt.a,{open:n,onClose:u,"aria-labelledby":"form-dialog-title"},r.a.createElement(wt.a,{id:"form-dialog-title"},e.title),r.a.createElement(Ot.a,null,r.a.createElement(Ct.a,null,e.message),e.withText&&r.a.createElement(Qe.a,{value:s,onChange:function(e){return c(e.target.value)},autoFocus:!0,margin:"dense",id:"remarque",label:"Remarque",type:"text",inputProps:{maxLength:100},fullWidth:!0})),r.a.createElement(kt.a,null,r.a.createElement(v.a,{onClick:u,color:"primary"},"Annuler"),r.a.createElement(v.a,{onClick:function(){i(!1),e.onConfirm(s)},color:"primary"},e.okText||"Valider")))}var St,Nt=a(293),xt=new(function(){function e(){Object(s.a)(this,e),this.sub=new R.a}return Object(c.a)(e,[{key:"set",value:function(e){this.sub.next(e)}},{key:"subscribe",value:function(e){return this.sub.subscribe(e)}}]),e}());!function(e){e[e.DEFAULT=0]="DEFAULT"}(St||(St={}));var jt=function(e){var t=r.a.useState(!1),a=Object(q.a)(t,2),i=a[0],o=a[1],l=r.a.useState(""),s=Object(q.a)(l,2),c=s[0],u=s[1];Object(n.useEffect)((function(){var e=xt.subscribe((function(e){[St.DEFAULT].indexOf(e.type)>-1&&(u(e.message),o(!0))}));return function(){e.unsubscribe()}}));var m=function(e,t){"clickaway"!==t&&o(!1)};return r.a.createElement(Nt.a,{open:i,autoHideDuration:800,onClose:m,message:c||"Panier actualis\xe9",action:r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{size:"small","aria-label":"close",color:"inherit",onClick:m},r.a.createElement(ht.a,{fontSize:"small"})))})},Pt=[{icon:r.a.createElement(mt.a,null),name:"print",label:"Imprimer"},{icon:r.a.createElement(ot.a,null),name:"cancel",label:"Annuler"}],Rt=[{icon:r.a.createElement(mt.a,null),name:"print",label:"Imprimer"},{icon:r.a.createElement(Et.a,null),name:"phone",label:"Contacter"},{icon:r.a.createElement(gt.a,null),name:"copy-email",label:"Copier"},{icon:r.a.createElement(ot.a,null),name:"cancel",label:"Annuler"}],Dt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={order:null,open:!1,hidden:!1,openCancelDialog:!1,openRefusedDialog:!1,openVerifiedDialog:!1},e.status={},e.sub=null,e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}},{key:"componentDidMount",value:function(){var e=this;this.status[xe.PENDING]={label:"A v\xe9rifier",color:this.props.classes.orange},this.status[xe.CANCELLED]={label:"Annul\xe9e",color:this.props.classes.grey},this.status[xe.VERIFIED]={label:"En attente de confirmation",color:this.props.classes.orange},this.status[xe.CONFIRMED]={label:"Confirm\xe9e",color:this.props.classes.green},this.status[xe.REFUSED]={label:"Refus\xe9e",color:this.props.classes.grey};var t=this.props.match.params.id;this.sub=_e.subscribe((function(t){console.log("Order > ordersStore.sub ",t),t&&t.length&&e.setState({order:t[0]})})),_e.load(t)}},{key:"onClickVerifiedOrder",value:function(e){var t=this,a=Object(A.a)({},this.state.order);a.reasonOf=e,a.status=xe.VERIFIED,Le.update(a).then((function(){return _e.load(t.props.match.params.id)})).catch((function(){return t.props.history.push("/error")}))}},{key:"onClickRefusedOrder",value:function(e){var t=this,a=Object(A.a)({},this.state.order);a.reasonOf=e,a.status=xe.REFUSED,Le.update(a).then((function(){return _e.load(t.props.match.params.id)})).catch((function(){return t.props.history.push("/error")}))}},{key:"cancel",value:function(e){var t=this,a=Object(A.a)({},this.state.order);a.reasonOf=e,a.status=xe.CANCELLED,Le.update(a).then((function(){return t.props.history.push("/my-orders")})).catch((function(){return t.props.history.push("/error")}))}},{key:"onClickDialAction",value:function(e){if(this.setState({open:!1}),e&&"print"===e.name)window.print();else if(e&&"cancel"===e.name)this.setState({openCancelDialog:!0});else if(e&&"phone"===e.name)window.open("tel:".concat(this.state.order.maker.phone),"_blank");else if(e&&"copy-email"===e.name){var t=document.querySelector("#customer_email");t&&(t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),xt.set({message:"Copier dans le presse-papier",type:St.DEFAULT}))}}},{key:"render",value:function(){var e,t,a,n,i,o,l,s,c,u,m,d,p=this,f=this.state.order,h=null===f||void 0===f?void 0:f.maker,b="";h&&h.payments&&!h.payments.acceptPaypal?b=[(null===(u=h.payments)||void 0===u?void 0:u.acceptCards)?"par carte":null,(null===(m=h.payments)||void 0===m?void 0:m.acceptBankCheck)?"par ch\xe8que":null,(null===(d=h.payments)||void 0===d?void 0:d.acceptCoins)?"en esp\xe8ce":null].filter((function(e){return null!==e})).join(" / "):h&&h.payments&&h.payments.acceptPaypal&&(b="en ligne via Paypal");return r.a.createElement("div",{className:"order"},r.a.createElement(Te,{mode:"light",history:this.props.history}),f&&r.a.createElement(Ye.a,{container:!0,direction:"column",justify:"center",spacing:1},r.a.createElement(jt,null),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Xe.a,{label:this.status[f.status].label,className:this.status[f.status].color})),f.status===xe.CONFIRMED&&b&&r.a.createElement(Ye.a,{item:!0},r.a.createElement(Je.a,{severity:"warning"},r.a.createElement("strong",null,"Consignes de paiement : "),b)),f.reasonOf&&r.a.createElement(Ye.a,{item:!0},r.a.createElement(Je.a,{severity:"info"},f.reasonOf)),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Ye.a,{container:!0,direction:"column",justify:"center",spacing:1},r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"R\xe9f\xe9rence",variant:"filled",fullWidth:!0,value:f.ref,inputProps:{readOnly:!0}})),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"R\xe9alis\xe9e le",variant:"filled",fullWidth:!0,value:De.a(f.created).format("ddd D MMM \xe0 HH:mm"),inputProps:{readOnly:!0}})))),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Ye.a,{className:"my-group",container:!0,direction:"column",justify:"center",spacing:1},r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"Vendeur",variant:"filled",fullWidth:!0,value:h.name,inputProps:{readOnly:!0}})),h.phone&&r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"T\xe9l\xe9phone",variant:"filled",fullWidth:!0,value:h.phone,inputProps:{readOnly:!0}})),h.address&&r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"Adresse",variant:"filled",fullWidth:!0,value:h.address,inputProps:{readOnly:!0}})))),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Ye.a,{container:!0,className:"my-group",direction:"column",justify:"center",spacing:1},r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"@ Client",id:"customer_email",variant:"filled",fullWidth:!0,value:null===(e=f.customer)||void 0===e?void 0:e.email,inputProps:{readOnly:!0}})),(null===(t=f.customer)||void 0===t?void 0:t.lastname)&&(null===(a=f.customer)||void 0===a?void 0:a.firstname)&&r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"Nom / Pr\xe9nom",variant:"filled",fullWidth:!0,value:"".concat(null===(n=f.customer)||void 0===n?void 0:n.lastname," ").concat(null===(i=f.customer)||void 0===i?void 0:i.firstname),inputProps:{readOnly:!0}})),(null===(o=f.customer)||void 0===o?void 0:o.phone)&&r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"T\xe9l\xe9phone",id:"customer_phone",variant:"filled",fullWidth:!0,value:null===(l=f.customer)||void 0===l?void 0:l.phone,inputProps:{readOnly:!0}})),(null===(s=f.customer)||void 0===s?void 0:s.address)&&r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"Adresse",variant:"filled",fullWidth:!0,value:null===(c=f.customer)||void 0===c?void 0:c.address,inputProps:{readOnly:!0}})))),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Ye.a,{container:!0,direction:"column",justify:"center",spacing:1},r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"Retrait / livraison",variant:"filled",fullWidth:!0,value:h.place.label,inputProps:{readOnly:!0}})),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"Adresse",variant:"filled",fullWidth:!0,value:h.place.address,inputProps:{readOnly:!0}})),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Qe.a,{label:"Horaire du retrait",variant:"filled",fullWidth:!0,value:De.a(f.slot).format("ddd D MMM \xe0 HH:mm"),inputProps:{readOnly:!0}}))))),f&&f.choices&&r.a.createElement(at.a,null,r.a.createElement($e.a,{className:this.props.classes.table,"aria-label":"simple table"},r.a.createElement(nt.a,null,r.a.createElement(rt.a,null,r.a.createElement(tt.a,{align:"center"},"Quantit\xe9"),r.a.createElement(tt.a,{align:"center"},"R\xe9f."),r.a.createElement(tt.a,{align:"center"},"P.U."),r.a.createElement(tt.a,{align:"center"},"Description"))),r.a.createElement(et.a,null,f.choices.map((function(e,t){return r.a.createElement(rt.a,{key:"pc_".concat(t)},r.a.createElement(tt.a,{align:"center"},e.quantity),r.a.createElement(tt.a,{align:"center"},e.product.ref),r.a.createElement(tt.a,{align:"center"},e.product.price),r.a.createElement(tt.a,{align:"center"},e.product.description))})),r.a.createElement(rt.a,null,r.a.createElement(tt.a,{colSpan:3,align:"right"},"Total"),r.a.createElement(tt.a,{align:"center"},f.total||"ERREUR","\u20ac"))))),r.a.createElement(Tt,{title:"Annuler la commande",withText:!0,onClose:function(){return p.setState({openCancelDialog:!1})},onConfirm:function(e){return p.cancel(e)},message:"Je souhaite annuler pour le motif :",open:this.state.openCancelDialog}),r.a.createElement(Tt,{title:"V\xe9rification de stocks",withText:!0,onClose:function(){return p.setState({openVerifiedDialog:!1})},onConfirm:function(e){return p.onClickVerifiedOrder(e||"")},okText:"J'ai v\xe9rifi\xe9",message:"La commande passera \xe0 l'\xe9tat '\xe0 confirmer' par le demandeur. D\xe8s qu'elle sera confirm\xe9e, vous serez notifi\xe9.",open:this.state.openVerifiedDialog}),r.a.createElement(Tt,{title:"Refuser la demande",withText:!0,onClose:function(){return p.setState({openRefusedDialog:!1})},onConfirm:function(e){return p.onClickRefusedOrder(e||"")},okText:"Je refuse",message:"La commande passera \xe0 l'\xe9tat 'refuser'. Merci d'indiquer un motif.",open:this.state.openRefusedDialog}),f&&f.status!==xe.PENDING&&r.a.createElement(lt.a,{ariaLabel:"SpeedDial tooltip example",className:"my-speed-dial",hidden:this.state.hidden,icon:r.a.createElement(st.a,null),onClose:function(){return p.setState({open:!1})},onOpen:function(){return p.setState({open:!0})},open:this.state.open},(f.status===xe.CONFIRMED?Pt:Rt).filter((function(e){return f.status!==xe.CANCELLED&&f.status!==xe.REFUSED||"cancel"!==e.name})).map((function(e){return r.a.createElement(ct.a,{key:e.name,icon:e.icon,tooltipTitle:e.label,tooltipOpen:!0,onClick:function(){return p.onClickDialAction(e)}})}))),f&&f.status===xe.PENDING&&r.a.createElement("div",{className:"fab-actions"},r.a.createElement(Ze.a,{size:"large",color:"default",onClick:function(){return p.setState({openRefusedDialog:!0})},"aria-label":"add",className:"fab-cancelled"},r.a.createElement(ht.a,null)),r.a.createElement(Ze.a,{size:"large",color:"secondary",onClick:function(){return p.setState({openVerifiedDialog:!0})},"aria-label":"add",className:"fab-verified"},r.a.createElement(pt.a,null))))}}]),a}(r.a.Component),At=Object(We.a)((function(e){return{table:{minWidth:650},orange:{color:e.palette.getContrastText(Ue.a[500]),backgroundColor:Ue.a[500]},grey:{color:e.palette.getContrastText(Ge.a[500]),backgroundColor:Ge.a[500]},green:{color:e.palette.common.white,backgroundColor:Ve.a[500]}}}))(Dt);a(184);var It=function(e){return r.a.createElement("div",{className:"error"},r.a.createElement(Te,{mode:"light",history:e.history}),r.a.createElement("div",{className:"area"},r.a.createElement(le.a,null),r.a.createElement(O.a,{variant:"h4"},"Une erreur est survenue"),r.a.createElement(v.a,{color:"secondary",onClick:function(){return window.open(_.support)}},"D\xe9poser un ticket")))},Mt=(a(185),a(283)),Lt=a(284),_t=a(285),Ft=a(286),Wt=a(287),Ut=a(130),Gt=a.n(Ut),Vt=a(288),Ht=a(131),Bt=a.n(Ht),qt=a(132),zt=a.n(qt),Kt=a(190),Yt=a(60),Qt=a(88),Jt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={products:[],openCleanCart:!1,activeIndex:-1,maker:null,openPreview:"",cart:null,wantToAdd:null},e.subMaker=null,e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){var e;null===(e=this.subMaker)||void 0===e||e.unsubscribe()}},{key:"componentDidMount",value:function(){var e=this;this.subMaker=F.subscribe((function(t){if(t){var a=(t.products||[]).map((function(e){return e.category=_.categories.find((function(t){return t.id===e.categoryId})),e}));e.setState({maker:t,products:a})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"maker"},r.a.createElement(Te,{mode:"catalog",history:this.props.history}),r.a.createElement(Ze.a,{size:"large",onClick:function(){return e.props.history.push("/products/0000")},color:"primary",className:"add-product","aria-label":"add product"},r.a.createElement(Gt.a,null)),r.a.createElement(Kt.a,{open:!!this.state.openPreview,onClose:function(){return e.setState({openPreview:""})},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(Qt.a,{className:"preview-paper",onClick:function(){return e.setState({openPreview:""})}},r.a.createElement("img",{src:this.state.openPreview,alt:"preview"}))),r.a.createElement(Ye.a,{className:"products-grid",container:!0,alignContent:"center",alignItems:"center",justify:"center",spacing:0},this.state.products.map((function(t,a){var n,i;return r.a.createElement(Ye.a,{item:!0,key:a},r.a.createElement(Mt.a,{className:"product-card"},t.available&&r.a.createElement(Lt.a,{title:t.label,subheader:null===(n=t.category)||void 0===n?void 0:n.label,avatar:r.a.createElement(E.a,{"aria-label":"recipe",className:e.props.classes.green},r.a.createElement(pt.a,null))}),!t.available&&r.a.createElement(Lt.a,{title:t.label,subheader:null===(i=t.category)||void 0===i?void 0:i.label,avatar:r.a.createElement(E.a,{"aria-label":"recipe",className:e.props.classes.grey},r.a.createElement(ot.a,null))}),r.a.createElement(_t.a,{onClick:function(){return e.setState({openPreview:t.image})},component:"img",alt:"product",height:"140",className:"maker-media",image:t.image,title:t.label}),r.a.createElement(Ft.a,{className:"content-price"},r.a.createElement(Ze.a,{size:"large",onClick:function(){return e.props.history.push("/products/".concat(t.ref))},color:"secondary",className:"look-product","aria-label":"edit product"},r.a.createElement(Bt.a,null))),r.a.createElement(Wt.a,{disableSpacing:!0,className:"cardaction-product"},r.a.createElement(O.a,{className:"typo-price",variant:"h5",color:"textSecondary"},r.a.createElement("div",{className:"price"},parseFloat("".concat(t.price)).toFixed(2),r.a.createElement("sup",null,"\u20ac"))),r.a.createElement(J.a,{className:e.state.activeIndex===a?"expandOpen":"expanded",onClick:function(){return e.state.activeIndex===a?e.setState({activeIndex:-1}):e.setState({activeIndex:a})},"aria-expanded":e.state.activeIndex===a,"aria-label":"voir plus"},r.a.createElement(zt.a,null))),r.a.createElement(Vt.a,{in:e.state.activeIndex===a,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ft.a,null,t.volume&&r.a.createElement(O.a,{className:"my-p",paragraph:!0},"Volume: ",parseFloat("".concat(t.volume)).toFixed(2),"L"),t.weight&&r.a.createElement(O.a,{className:"my-p",paragraph:!0},"Poids: ",t.weight>1e3?parseFloat("".concat(t.weight/1e3)).toFixed(1)+"k":parseFloat("".concat(t.weight)).toFixed(0),"g"),t.description&&r.a.createElement(O.a,{className:"my-p",paragraph:!0},t.description)))))}))))}}]),a}(r.a.Component),Xt=Object(We.a)((function(e){return{grey:{color:e.palette.getContrastText(Ge.a[500]),backgroundColor:Ge.a[500]},green:{color:Yt.a.white,backgroundColor:Ve.a[500]}}}))(Jt),Zt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={maker:null,product:null},e.subMaker=null,e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){var e;null===(e=this.subMaker)||void 0===e||e.unsubscribe()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.subMaker=F.subscribe((function(a){if(a){var n=(a.products||[]).filter((function(e){return e.ref===t}));console.log(n),e.setState({maker:a,product:n||null})}}))}},{key:"render",value:function(){var e=this.state.product;return r.a.createElement("div",{className:"product"},r.a.createElement(Te,{mode:"light",history:this.props.history}),this.state.product&&r.a.createElement("div",{className:"area"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:e.image,alt:"apercu produit"}))))}}]),a}(r.a.Component),$t=Object(p.a)({palette:{common:{black:"#000",white:"#fff"},background:{paper:"#fff",default:"#fafafa"},primary:{light:"rgba(74, 74, 74, 0.77)",main:"rgba(74, 74, 74, 1)",dark:"rgba(61, 61, 62, 1)",contrastText:"#fff"},secondary:{light:"rgba(255, 102, 0, 0.79)",main:"rgba(255, 102, 0, 1)",dark:"rgba(192, 77, 0, 1)",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}}}),ea=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={concurrentCalls:0},e.subHttpClientRequest=null,e.subHttpClientResponse=null,e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;Pe.init(),Re.locale("fr"),this.subHttpClientRequest=D.subOnRequest((function(){})),this.subHttpClientResponse=D.subOnResponse((function(){e.state.concurrentCalls}))}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.subHttpClientRequest)||void 0===e||e.unsubscribe(),null===(t=this.subHttpClientResponse)||void 0===t||t.unsubscribe()}},{key:"render",value:function(){return r.a.createElement(f.a,{theme:$t},r.a.createElement(h.a,{className:"backdrop",open:0!==this.state.concurrentCalls},r.a.createElement(b.a,{color:"inherit"})),r.a.createElement(l.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login",component:V}),r.a.createElement(B,{exact:!0,path:"/",component:Ke}),r.a.createElement(B,{exact:!0,path:"/my-orders/:id",component:At}),r.a.createElement(B,{exact:!0,path:"/products",component:Xt}),r.a.createElement(B,{exact:!0,path:"/products/:id",component:Zt}),r.a.createElement(d.b,{path:"/error",component:It}),r.a.createElement(d.b,{path:"*",component:je}))))}}]),a}(r.a.Component);a(186);o.a.render(r.a.createElement(l.a,null,r.a.createElement(ea,null)),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.924820d1.chunk.js.map