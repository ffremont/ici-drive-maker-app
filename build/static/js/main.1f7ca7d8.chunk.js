(this["webpackJsonpmaker-app"]=this["webpackJsonpmaker-app"]||[]).push([[0],{101:function(e,t,a){e.exports=a.p+"static/media/google.752536d8.svg"},102:function(e,t,a){e.exports=a.p+"static/media/mail.59ed2e77.svg"},106:function(e,t,a){e.exports=a.p+"static/media/ici-drive-icon.546ec8b4.png"},107:function(e,t,a){e.exports=a.p+"static/media/ici-drive-banner.117fc591.png"},141:function(e,t,a){e.exports=a(181)},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t){Array.prototype.sortBy=function(e,t){var a=arguments;this.sort((function(e,t){for(var n=0,r=0;r<a.length&&0===n;r+=2){var i=a[r];n=e[i]<t[i]?-1:e[i]>t[i]?1:0,n*=a[r+1]?-1:1}return n}))}},181:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),o=a.n(i),l=a(33),s=(a(146),a(12)),c=a(13),u=a(37),m=a(36),d=(a(147),a(39)),p=a(124),f=a(268),h=a(182),b=a(235),E=(a(148),a(273)),v=a(241),g=a(240),y=a(105),k=a.n(y),O=a(55),C=a(239),T=a(101),w=a.n(T),S=a(102),P=a.n(S),R=a(234),j=new(function(){function e(){Object(s.a)(this,e),this.subToken=new R.a(null),this.subMaker=new R.a(null),this.isAuth=!1}return Object(c.a)(e,[{key:"authenticate",value:function(e){this.isAuth=!0,this.subMaker.next(e)}},{key:"setIdToken",value:function(e){this.subToken.next(e)}},{key:"signout",value:function(){this.isAuth=!1,this.subMaker.next(null),this.subToken.next(null),window.firebase&&window.firebase.auth().signOut()}}]),e}());function N(){}N.prototype.addProfile=function(e){},N.prototype.addScope=function(e){},N.prototype.setCustomParameters=function(e){};var x=function(){function e(){var t=this;Object(s.a)(this,e),this.isSigned=!0,this.authFns=[],this.userMock={email:"ff.fremont.florent@gmail.com"},this.idTokenMock="azerty",this.authDelayMock=2e3,this.getIdTokenPromise=void 0,this.getIdTokenPromiseResolve=void 0,this.getIdTokenPromise=new Promise((function(e){t.getIdTokenPromiseResolve=e}))}return Object(c.a)(e,[{key:"init",value:function(){return this.auth.FacebookAuthProvider=function(){return N},this.auth.EmailAuthProvider=function(){return N},this.auth.GoogleAuthProvider=function(){return N},this}},{key:"messaging",value:function(){return{usePublicVapidKey:function(){},onMessage:function(){},onTokenRefresh:function(){}}}},{key:"auth",value:function(){var e=this;return{signOut:function(){console.log("signOut")},onAuthStateChanged:function(t){return e.authFns.push(t),e.isSigned?setTimeout((function(){e.authFns.forEach((function(t){return t(e.userMock)})),e.getIdTokenPromiseResolve(e.idTokenMock)}),e.authDelayMock):e.authFns.forEach((function(e){return e(null)})),function(){e.authFns.splice(e.authFns.findIndex((function(e){return e===t})),1)}},signInWithRedirect:function(t){setTimeout((function(){e.authFns.forEach((function(t){return t(e.userMock)})),e.getIdTokenPromiseResolve(e.idTokenMock)}),1e3)},currentUser:{getIdToken:function(){return e.getIdTokenPromise}}}}}]),e}(),A=a(103),D=a.n(A),I=a(123),M=new(function(){function e(){var t=this;Object(s.a)(this,e),this.subRequest=new I.a,this.subResponse=new I.a,this.config=void 0,this.idToken=null,this.axios=void 0,setTimeout((function(){j.subToken.subscribe((function(e){return t.idToken=e}))}),0),this.config={responseType:"json",timeout:15e3,transformRequest:[function(e,a){return a["Content-Type"]="application/json",null!==t.idToken&&(a.Authorization="Bearer ".concat(t.idToken)),t.subRequest.next({data:e,headers:a}),JSON.stringify(e)}],transformResponse:[function(e,a){return t.subResponse.next({data:e,headers:a}),e}]},this.axios=D.a.create(this.config)}return Object(c.a)(e,[{key:"subOnRequest",value:function(e){return this.subRequest.subscribe(e)}},{key:"subOnResponse",value:function(e){return this.subResponse.subscribe(e)}}]),e}()),_=a(57),L={cgu:"https://docs.google.com/document/d/e/2PACX-1vRxz61BpPZL-YJXX2E6tvdYsI0PG1vxv1eGjxQ7TMfqififiO-Snb5pZU21bkjZgTHyENu3I5nFzxRZ/pub",cgr:"http://google.fr",support:"https://forms.gle/q4KYieunhwWVn1BR6",baseURL:"https://app.ici-drive.fr",fcmPublicVapidKey:"BO7yESbBXsx7ddVzYqvkNpWf-3S6sjqQxEoolQQ1OG02D0-nmrpowEsYRHuoGEzT4w5Np6Gdwto5FiLsS--sONw",API:{self:function(){return"".concat(W,"/makers/self.json")},orders:function(e){return"".concat("/api-mock","/my-orders.json?ref=").concat(e)}},categories:[{label:"Viandes",id:"viandes"},{label:"Oeufs",id:"oeufs"},{label:"Laitiers",id:"laitiers"},{label:"Epiceries",id:"epiceries"},{label:"Fruits / L\xe9gumes",id:"fruit-leg"},{label:"Mer",id:"mer"},{label:"Glaces",id:"glace"},{label:"Boissons",id:"boissons"}]},W="/api",F={cgu:"https://docs.google.com/document/d/e/2PACX-1vRxz61BpPZL-YJXX2E6tvdYsI0PG1vxv1eGjxQ7TMfqififiO-Snb5pZU21bkjZgTHyENu3I5nFzxRZ/pub",cgr:"",support:"https://forms.gle/q4KYieunhwWVn1BR6",baseURL:"https://app.ici-drive.fr",fcmPublicVapidKey:"BO7yESbBXsx7ddVzYqvkNpWf-3S6sjqQxEoolQQ1OG02D0-nmrpowEsYRHuoGEzT4w5Np6Gdwto5FiLsS--sONw",API:{self:function(){return"".concat(W,"/admin/makers/self")},orders:function(e){return"".concat(W,"/admin/my-orders/").concat(e||"")}},categories:[{label:"Viandes",id:"viandes"},{label:"Oeufs",id:"oeufs"},{label:"Laitiers",id:"laitiers"},{label:"Epiceries",id:"epiceries"},{label:"Fruits / L\xe9gumes",id:"fruit-leg"},{label:"Mer",id:"mer"},{label:"Glaces",id:"glace"},{label:"Boissons",id:"boissons"}]},G="prod"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?F:L,U=Object(_.a)({},G),B=new(function(){function e(){Object(s.a)(this,e),this.sub=new R.a(null)}return Object(c.a)(e,[{key:"set",value:function(e){this.sub.next(e)}},{key:"subscribe",value:function(e){return this.sub.subscribe(e)}},{key:"load",value:function(){var e=this;M.axios.get(U.API.self()).then((function(t){e.set(t.data)})).catch((function(e){console.error(e)}))}}]),e}());"prod"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE&&(window.firebase=(new x).init());var H=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).unregisterAuthObserver=null,e.state={loading:!0,isSignedIn:!1,from:"/"},e}return Object(c.a)(a,[{key:"sign",value:function(e){e.addScope("profile"),e.addScope("email"),window.firebase.auth().signInWithRedirect(e)}},{key:"signEmail",value:function(){this.sign("prod"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?new window.firebase.auth.EmailAuthProvider:new(window.firebase.auth.EmailAuthProvider()))}},{key:"signGoogle",value:function(){var e="prod"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?new window.firebase.auth.GoogleAuthProvider:new(window.firebase.auth.GoogleAuthProvider());this.sign(e)}},{key:"componentDidMount",value:function(){this.registerOnFirebase(),this.props.location&&(this.props.location.state?this.setState({from:this.props.location.state.fromPathname}):this.setState({from:"/"}))}},{key:"registerOnFirebase",value:function(){var e=this;this.unregisterAuthObserver=window.firebase.auth().onAuthStateChanged((function(t){e.setState({loading:!1,isSignedIn:!!t}),t&&(window.firebase.auth().currentUser.getIdToken().then((function(e){return j.setIdToken(e)})),B.load())}))}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver&&this.unregisterAuthObserver()}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement(b.a,{className:"wait-auth"})):this.state.isSignedIn?r.a.createElement(d.a,{to:{pathname:this.state.from,state:{from:"/login"}}}):r.a.createElement("div",{className:"login"},r.a.createElement(C.a,{component:"main",maxWidth:"xs"},r.a.createElement(g.a,null),r.a.createElement("div",{className:"paper"},r.a.createElement(E.a,{className:"avatar"},r.a.createElement(k.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},"Connexion"),r.a.createElement(v.a,{type:"button",fullWidth:!0,size:"large",variant:"contained",color:"default",onClick:function(){return e.signGoogle()},className:"provider google"},r.a.createElement("img",{alt:"google",src:w.a})," Connexion par Google"),r.a.createElement(v.a,{type:"button",fullWidth:!0,color:"primary",size:"large",onClick:function(){return e.signEmail()},variant:"contained",className:"provider email"},r.a.createElement("img",{alt:"mail",src:P.a})," Connexion par email"))))}}]),a}(r.a.Component),V=a(125),q=function(e){e.children,e.component;var t=Object(V.a)(e,["children","component"]),a=e.component;return r.a.createElement(d.b,Object.assign({},t,{render:function(e){var t=e.location,n=e.history,i=e.match;return j.isAuth?r.a.createElement(a,{location:t,history:n,match:i}):r.a.createElement(d.a,{to:{pathname:"/login",state:{fromPathname:t.pathname}}})}}))},K=(a(171),a(31)),z=a(242),Y=a(274),Q=a(248),X=a(249),Z=a(250),J=a(113),$=a.n(J),ee=a(69),te=a.n(ee),ae=a(275),ne=a(244),re=a(245),ie=a(246),oe=a(247),le=a(108),se=a.n(le),ce=a(70),ue=a.n(ce),me=a(112),de=a.n(me),pe=a(106),fe=a.n(pe),he=a(107),be=a.n(he),Ee=(a(172),a(114)),ve=a.n(Ee),ge=a(111),ye=a.n(ge),ke=a(109),Oe=a.n(ke),Ce=a(110),Te=a.n(Ce),we=Object(z.a)((function(e){return Object(Y.a)({root:{flexGrow:1},firstButton:{marginRight:e.spacing(2)},appBar:{color:e.palette.grey[900],background:e.palette.common.white},title:{flexGrow:1,paddingRight:50},list:{width:250},fullList:{width:"auto"}})})),Se=function(e){var t=we(),a=Object(n.useState)("full"),i=Object(K.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(!1),c=Object(K.a)(s,1)[0],u=Object(n.useState)(""),m=Object(K.a)(u,2),d=m[0],p=(m[1],Object(n.useState)(!1)),f=Object(K.a)(p,2),h=f[0],b=f[1],E=Object(n.useState)(!1),v=Object(K.a)(E,2);v[0],v[1];r.a.useEffect((function(){l(e.mode)}),[e.mode]);return r.a.createElement("div",{className:t.root},r.a.createElement(ae.a,{anchor:"left",open:h,onClose:function(){return b(!1)}},r.a.createElement(ne.a,{className:"drawer-list"},d&&r.a.createElement(re.a,{selected:!0,button:!0,key:"connected"},r.a.createElement(ie.a,null,r.a.createElement(te.a,null)),r.a.createElement(oe.a,{primary:"Connect\xe9",secondary:d})),r.a.createElement(re.a,{button:!0,key:"orders",onClick:function(){return e.history.push("/my-orders")}},r.a.createElement(ie.a,null,r.a.createElement(se.a,null)),r.a.createElement(oe.a,{primary:"Mes r\xe9servations",secondary:"En cours et pass\xe9es"})),r.a.createElement(re.a,{button:!0,key:"point",onClick:function(){return e.history.push("/my-profil")}},r.a.createElement(ie.a,null,r.a.createElement(Oe.a,null)),r.a.createElement(oe.a,{primary:"Retrait & livraison"})),r.a.createElement(re.a,{button:!0,key:"account",onClick:function(){return e.history.push("/my-profil")}},r.a.createElement(ie.a,null,r.a.createElement(Te.a,null)),r.a.createElement(oe.a,{primary:"Mon drive"})),r.a.createElement(re.a,{button:!0,key:"support",onClick:function(){return window.open(U.support)}},r.a.createElement(ie.a,null,r.a.createElement(ue.a,null)),r.a.createElement(oe.a,{primary:"Support",secondary:"D\xe9clarer un incident"})),r.a.createElement(re.a,{button:!0,key:"mentions"},r.a.createElement(ie.a,null,r.a.createElement(ye.a,null)),r.a.createElement(oe.a,{primary:"Mentions",secondary:"CGU, CGR, ..."})),d&&r.a.createElement(re.a,{button:!0,key:"logout",onClick:function(){window.confirm("Voulez-vous d\xe9connecter votre appareil de votre compte ?")&&(j.signout(),window.location.reload())}},r.a.createElement(ie.a,null,r.a.createElement(de.a,null)),r.a.createElement(oe.a,{primary:"Se d\xe9connecter",secondary:"Dissocier cet appareil"})))),r.a.createElement(Q.a,{position:"fixed",className:t.appBar},r.a.createElement(X.a,null,"full"===o&&r.a.createElement(Z.a,{edge:"start",className:t.firstButton,onClick:function(){return b(!0)},color:"inherit","aria-label":"menu"},r.a.createElement($.a,null)),"full"!==o&&r.a.createElement(Z.a,{edge:"start",className:t.firstButton,onClick:function(){return e.history.goBack()},color:"inherit","aria-label":"pr\xe9c\xe9dent"},r.a.createElement(ve.a,null)),"full"===o&&r.a.createElement(O.a,{variant:"h6",className:t.title},r.a.createElement("img",{alt:"icon ici drive",className:"ici-drive-icon",src:be.a})),["light","catalog"].indexOf(o)>-1&&r.a.createElement(O.a,{variant:"h6",align:"center",className:t.title},r.a.createElement("img",{alt:"icon ici drive",className:"ici-drive-icon",src:fe.a})),["my-orders"].indexOf(o)>-1&&r.a.createElement(O.a,{variant:"h6",align:"center",className:t.title},"Mes r\xe9servations"),c&&r.a.createElement("div",null,r.a.createElement(Z.a,{"aria-label":"Mes r\xe9servations","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit"},r.a.createElement(te.a,null))))))},Pe=a(115),Re=a.n(Pe);var je,Ne=function(e){return r.a.createElement("div",{className:"no-match"},r.a.createElement(Se,{mode:"light",history:e.history}),r.a.createElement("div",{className:"area"},r.a.createElement(Re.a,null),r.a.createElement(O.a,{variant:"h4"},"Page introuvable")))},xe=new(function(){function e(){Object(s.a)(this,e),this.fcm="",this.lastFcm="",this.messaging=void 0,this.isInit=!1}return Object(c.a)(e,[{key:"init",value:function(){this.isInit||(this.isInit=!0,window.firebase&&(this.messaging=window.firebase.messaging(),this.messaging.usePublicVapidKey(U.fcmPublicVapidKey),this.messaging.onMessage(this.onMessage.bind(this)),this.messaging.onTokenRefresh(this.onTokenRefresh.bind(this))),setTimeout((function(){}),0))}},{key:"onTokenRefresh",value:function(){var e=this;this.messaging.getToken().then((function(t){console.log("Token refreshed."),e.fcm=t})).catch((function(e){console.log("Unable to retrieve refreshed token ",e)}))}},{key:"onMessage",value:function(e){console.log("Message received. ",e)}}]),e}()),Ae=a(34),De=a.n(Ae),Ie=(a(174),a(175),a(79)),Me=a.n(Ie),_e=a(116),Le=function(){function e(){Object(s.a)(this,e),this.sub=new R.a([])}return Object(c.a)(e,[{key:"set",value:function(e){this.sub.next(e)}},{key:"subscribe",value:function(e){return this.sub.subscribe(e)}},{key:"load",value:function(e){var t=this;return M.axios.get(U.API.orders(e)).then((function(a){return e?t.set([a.data]):t.set(a.data),a.data}))}}],[{key:"update",value:function(){var e=Object(_e.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.axios.put(U.API.orders(t.id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),We=new Le;!function(e){e.PENDING="pending",e.VERIFIED="verified",e.REFUSED="refused",e.CONFIRMED="confirmed",e.CANCELLED="cancelled"}(je||(je={}));var Fe=a(252),Ge=a(4),Ue=a(251),Be=a(73),He=a(74),Ve=a(253),qe=a(117),Ke=a.n(qe),ze=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).statusLabel={},e.state={orders:[]},e.sub=null,e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}},{key:"componentDidMount",value:function(){var e=this;this.statusLabel[je.PENDING]={label:"En cours de validation",color:this.props.classes.orange},this.statusLabel[je.CANCELLED]={label:"Annul\xe9e",color:this.props.classes.grey},this.statusLabel[je.VERIFIED]={label:"V\xe9rifi\xe9e, en attente de confirmation",color:this.props.classes.orange},this.statusLabel[je.CONFIRMED]={label:"Confirm\xe9e",color:this.props.classes.green},this.statusLabel[je.REFUSED]={label:"Refus\xe9e",color:this.props.classes.grey},this.sub=We.subscribe((function(t){console.log("MyOrders > ordersStore.sub ",t),t&&t.sortBy("created",!0),e.setState({orders:t||[]})})),We.load()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"my-orders"},r.a.createElement(Se,{mode:"my-orders",history:this.props.history}),r.a.createElement("div",{className:"orders"},r.a.createElement(ne.a,null,this.state.orders.map((function(t,a){return r.a.createElement(re.a,{key:"li_".concat(a),onClick:function(){return e.props.history.push("/my-orders/".concat(t.id))}},r.a.createElement(Fe.a,null,r.a.createElement(E.a,{className:e.statusLabel[t.status].color},e.statusLabel[t.status].label.substr(0,1).toUpperCase())),r.a.createElement(oe.a,{primary:e.statusLabel[t.status].label+" (".concat(t.total,"\u20ac)"),secondary:De.a(t.created).format("ddd D MMM \xe0 HH:mm")}),r.a.createElement(Ve.a,null,r.a.createElement(Z.a,{edge:"end","aria-label":"next"},r.a.createElement(Ke.a,null))))})))))}}]),a}(r.a.Component),Ye=Object(Ge.a)((function(e){return{orange:{color:e.palette.getContrastText(Ue.a[500]),backgroundColor:Ue.a[500]},grey:{color:e.palette.getContrastText(Be.a[500]),backgroundColor:Be.a[500]},green:{color:e.palette.getContrastText(He.a[500]),backgroundColor:He.a[500]}}}))(ze),Qe=(a(177),a(260)),Xe=a(269),Ze=a(270),Je=a(272),$e=a(267),et=a(262),tt=a(266),at=a(265),nt=a(261),rt=a(263),it=a(264),ot=a(118),lt=a.n(ot),st=a(276),ct=a(277),ut=a(271),mt=a(80),dt=a.n(mt),pt=a(122),ft=a.n(pt),ht=a(121),bt=a.n(ht),Et=a(119),vt=a.n(Et),gt=a(254),yt=a(259),kt=a(256),Ot=a(257),Ct=a(255);function Tt(e){var t=r.a.useState(!1),a=Object(K.a)(t,2),n=a[0],i=a[1],o=r.a.useState(""),l=Object(K.a)(o,2),s=l[0],c=l[1];r.a.useEffect((function(){i(e.open)}),[e.open]);var u=function(){i(!1),e.onClose()};return r.a.createElement(gt.a,{open:n,onClose:u,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ct.a,{id:"form-dialog-title"},e.title),r.a.createElement(kt.a,null,r.a.createElement(Ot.a,null,e.message),e.withText&&r.a.createElement(Xe.a,{value:s,onChange:function(e){return c(e.target.value)},autoFocus:!0,margin:"dense",id:"remarque",label:"Remarque",type:"text",inputProps:{maxLength:100},fullWidth:!0})),r.a.createElement(yt.a,null,r.a.createElement(v.a,{onClick:u,color:"primary"},"Annuler"),r.a.createElement(v.a,{onClick:function(){i(!1),e.onConfirm(s)},color:"primary"},e.okText||"Valider")))}var wt=[{icon:r.a.createElement(dt.a,null),name:"print",label:"Imprimer"},{icon:r.a.createElement(lt.a,null),name:"cancel",label:"Annuler"}],St=[{icon:r.a.createElement(dt.a,null),name:"print",label:"Imprimer"},{icon:r.a.createElement(vt.a,null),name:"phone",label:"Contacter"}],Pt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={order:null,open:!1,hidden:!1,openCancelDialog:!1,openInfoConfirmed:!1},e.status={},e.sub=null,e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}},{key:"componentDidMount",value:function(){var e=this;this.status[je.PENDING]={label:"En cours de validation",color:this.props.classes.orange},this.status[je.CANCELLED]={label:"Annul\xe9e",color:this.props.classes.grey},this.status[je.VERIFIED]={label:"V\xe9rifi\xe9e, en attente de confirmation",color:this.props.classes.orange},this.status[je.CONFIRMED]={label:"Confirm\xe9e",color:this.props.classes.green},this.status[je.REFUSED]={label:"Refus\xe9e",color:this.props.classes.grey};var t=this.props.match.params.id;this.sub=We.subscribe((function(t){console.log("Order > ordersStore.sub ",t),t&&t.length&&e.setState({order:t[0]})})),We.load(t||"")}},{key:"onClickConfirmOrder",value:function(){var e=this,t=Object(_.a)({},this.state.order);t.reasonOf="",t.status=je.CONFIRMED,Le.update(t).then((function(){return e.setState({openInfoConfirmed:!0})})).catch((function(){return e.props.history.push("/error")}))}},{key:"cancel",value:function(e){var t=this,a=Object(_.a)({},this.state.order);a.reasonOf=e,a.status=je.CANCELLED,Le.update(a).then((function(){return t.props.history.push("/my-orders")})).catch((function(){return t.props.history.push("/error")}))}},{key:"onClickDialAction",value:function(e){this.setState({open:!1}),e&&"print"===e.name?window.print():e&&"cancel"===e.name?this.setState({openCancelDialog:!0}):e&&"phone"===e.name&&window.open("tel:".concat(this.state.order.maker.phone),"_blank")}},{key:"render",value:function(){var e,t,a,n,i,o,l,s,c,u,m,d,p=this,f=this.state.order,h=null===f||void 0===f?void 0:f.maker,b="";h&&h.payments&&!h.payments.acceptPaypal?b=[(null===(u=h.payments)||void 0===u?void 0:u.acceptCards)?"par carte":null,(null===(m=h.payments)||void 0===m?void 0:m.acceptBankCheck)?"par ch\xe8que":null,(null===(d=h.payments)||void 0===d?void 0:d.acceptCoins)?"en esp\xe8ce":null].filter((function(e){return null!==e})).join(" / "):h&&h.payments&&h.payments.acceptPaypal&&(b="en ligne via Paypal");return r.a.createElement("div",{className:"order"},r.a.createElement(Se,{mode:"light",history:this.props.history}),f&&r.a.createElement(Qe.a,{container:!0,direction:"column",justify:"center",spacing:1},r.a.createElement(Qe.a,{item:!0},r.a.createElement(Je.a,{label:this.status[f.status].label,className:this.status[f.status].color})),f.status===je.CONFIRMED&&b&&r.a.createElement(Qe.a,{item:!0},r.a.createElement(Ze.a,{severity:"warning"},r.a.createElement("strong",null,"Consignes de paiement : "),b)),f.reasonOf&&r.a.createElement(Qe.a,{item:!0},r.a.createElement(Ze.a,{severity:"info"},f.reasonOf)),r.a.createElement(Qe.a,{item:!0},r.a.createElement(Qe.a,{container:!0,direction:"column",justify:"center",spacing:1},r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"R\xe9f\xe9rence",variant:"filled",fullWidth:!0,value:f.ref,inputProps:{readOnly:!0}})),r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"R\xe9alis\xe9e le",variant:"filled",fullWidth:!0,value:De.a(f.created).format("ddd D MMM \xe0 HH:mm"),inputProps:{readOnly:!0}})))),r.a.createElement(Qe.a,{item:!0},r.a.createElement(Qe.a,{className:"my-group",container:!0,direction:"column",justify:"center",spacing:1},r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"Vendeur",variant:"filled",fullWidth:!0,value:h.name,inputProps:{readOnly:!0}})),h.phone&&r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"T\xe9l\xe9phone",variant:"filled",fullWidth:!0,value:h.phone,inputProps:{readOnly:!0}})),h.address&&r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"Adresse",variant:"filled",fullWidth:!0,value:h.address,inputProps:{readOnly:!0}})))),r.a.createElement(Qe.a,{item:!0},r.a.createElement(Qe.a,{container:!0,className:"my-group",direction:"column",justify:"center",spacing:1},r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"@ Client",variant:"filled",fullWidth:!0,value:null===(e=f.customer)||void 0===e?void 0:e.email,inputProps:{readOnly:!0}})),(null===(t=f.customer)||void 0===t?void 0:t.lastname)&&(null===(a=f.customer)||void 0===a?void 0:a.firstname)&&r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"Nom / Pr\xe9nom",variant:"filled",fullWidth:!0,value:"".concat(null===(n=f.customer)||void 0===n?void 0:n.lastname," ").concat(null===(i=f.customer)||void 0===i?void 0:i.firstname),inputProps:{readOnly:!0}})),(null===(o=f.customer)||void 0===o?void 0:o.phone)&&r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"T\xe9l\xe9phone",variant:"filled",fullWidth:!0,value:null===(l=f.customer)||void 0===l?void 0:l.phone,inputProps:{readOnly:!0}})),(null===(s=f.customer)||void 0===s?void 0:s.address)&&r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"Adresse",variant:"filled",fullWidth:!0,value:null===(c=f.customer)||void 0===c?void 0:c.address,inputProps:{readOnly:!0}})))),r.a.createElement(Qe.a,{item:!0},r.a.createElement(Qe.a,{container:!0,direction:"column",justify:"center",spacing:1},r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"Retrait / livraison",variant:"filled",fullWidth:!0,value:h.place.label,inputProps:{readOnly:!0}})),r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"Adresse",variant:"filled",fullWidth:!0,value:h.place.address,inputProps:{readOnly:!0}})),r.a.createElement(Qe.a,{item:!0},r.a.createElement(Xe.a,{label:"Horaire du retrait",variant:"filled",fullWidth:!0,value:De.a(f.slot).format("ddd D MMM \xe0 HH:mm"),inputProps:{readOnly:!0}}))))),f&&f.choices&&r.a.createElement(nt.a,null,r.a.createElement(et.a,{className:this.props.classes.table,"aria-label":"simple table"},r.a.createElement(rt.a,null,r.a.createElement(it.a,null,r.a.createElement(at.a,{align:"center"},"Quantit\xe9"),r.a.createElement(at.a,{align:"center"},"R\xe9f."),r.a.createElement(at.a,{align:"center"},"P.U."),r.a.createElement(at.a,{align:"center"},"Description"))),r.a.createElement(tt.a,null,f.choices.map((function(e,t){return r.a.createElement(it.a,{key:"pc_".concat(t)},r.a.createElement(at.a,{align:"center"},e.quantity),r.a.createElement(at.a,{align:"center"},e.product.ref),r.a.createElement(at.a,{align:"center"},e.product.price),r.a.createElement(at.a,{align:"center"},e.product.description))})),r.a.createElement(it.a,null,r.a.createElement(at.a,{colSpan:3,align:"right"},"Total"),r.a.createElement(at.a,{align:"center"},f.total||"ERREUR","\u20ac"))))),r.a.createElement(Tt,{title:"Annuler la commande",withText:!0,onClose:function(){return p.setState({openCancelDialog:!1})},onConfirm:function(e){return p.cancel(e)},message:"Je souhaite annuler pour le motif :",open:this.state.openCancelDialog}),r.a.createElement(Tt,{title:"La suite par email",withText:!1,onClose:function(){return p.setState({openInfoConfirmed:!1})},onConfirm:function(e){return p.props.history.push("/my-orders")},message:"Un email r\xe9capitulatif vous a \xe9t\xe9 transmis.",open:this.state.openInfoConfirmed}),f&&f.status!==je.VERIFIED&&r.a.createElement(st.a,{ariaLabel:"SpeedDial tooltip example",className:"my-speed-dial",hidden:this.state.hidden,icon:r.a.createElement(ct.a,null),onClose:function(){return p.setState({open:!1})},onOpen:function(){return p.setState({open:!0})},open:this.state.open},(f.status===je.PENDING?wt:St).map((function(e){return r.a.createElement(ut.a,{key:e.name,icon:e.icon,tooltipTitle:e.label,tooltipOpen:!0,onClick:function(){return p.onClickDialAction(e)}})}))),f&&f.status===je.VERIFIED&&r.a.createElement("div",{className:"fab-actions"},r.a.createElement($e.a,{size:"large",color:"default",onClick:function(){return p.setState({openCancelDialog:!0})},"aria-label":"add",className:"fab-cancelled"},r.a.createElement(bt.a,null)),r.a.createElement($e.a,{size:"large",color:"secondary",onClick:function(){return p.onClickConfirmOrder()},"aria-label":"add",className:"fab-verified"},r.a.createElement(ft.a,null))))}}]),a}(r.a.Component),Rt=Object(Ge.a)((function(e){return{table:{minWidth:650},orange:{color:e.palette.getContrastText(Ue.a[500]),backgroundColor:Ue.a[500]},grey:{color:e.palette.getContrastText(Be.a[500]),backgroundColor:Be.a[500]},green:{color:e.palette.common.white,backgroundColor:He.a[500]}}}))(Pt);a(178);var jt=function(e){return r.a.createElement("div",{className:"error"},r.a.createElement(Se,{mode:"light",history:e.history}),r.a.createElement("div",{className:"area"},r.a.createElement(ue.a,null),r.a.createElement(O.a,{variant:"h4"},"Une erreur est survenue"),r.a.createElement(v.a,{color:"secondary",onClick:function(){return window.open(U.support)}},"D\xe9poser un ticket")))};a(179);var Nt=function(){return r.a.createElement("div",{className:"home"},"home",r.a.createElement(l.b,{to:"/login"},"go to login"))},xt=Object(p.a)({palette:{common:{black:"#000",white:"#fff"},background:{paper:"#fff",default:"#fafafa"},primary:{light:"rgba(74, 74, 74, 0.77)",main:"rgba(74, 74, 74, 1)",dark:"rgba(61, 61, 62, 1)",contrastText:"#fff"},secondary:{light:"rgba(255, 102, 0, 0.79)",main:"rgba(255, 102, 0, 1)",dark:"rgba(192, 77, 0, 1)",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}}}),At=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={concurrentCalls:0},e.subHttpClientRequest=null,e.subHttpClientResponse=null,e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;xe.init(),Ae.locale("fr"),this.subHttpClientRequest=M.subOnRequest((function(){})),this.subHttpClientResponse=M.subOnResponse((function(){e.state.concurrentCalls}))}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.subHttpClientRequest)||void 0===e||e.unsubscribe(),null===(t=this.subHttpClientResponse)||void 0===t||t.unsubscribe()}},{key:"render",value:function(){return r.a.createElement(f.a,{theme:xt},r.a.createElement(h.a,{className:"backdrop",open:0!==this.state.concurrentCalls},r.a.createElement(b.a,{color:"inherit"})),r.a.createElement(l.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:Nt}),r.a.createElement(d.b,{path:"/login",component:H}),r.a.createElement(q,{exact:!0,path:"/my-orders",component:Ye}),r.a.createElement(q,{exact:!0,path:"/my-orders/:id",component:Rt}),r.a.createElement(d.b,{path:"/error",component:jt}),r.a.createElement(d.b,{path:"*",component:Ne}))))}}]),a}(r.a.Component);a(180);o.a.render(r.a.createElement(l.a,null,r.a.createElement(At,null)),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.1f7ca7d8.chunk.js.map