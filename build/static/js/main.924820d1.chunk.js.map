{"version":3,"sources":["assets/images/google.svg","assets/images/mail.svg","assets/images/ici-drive-icon.png","assets/images/ici-drive-banner.png","array.sortBy.js","services/http-client.service.ts","confs/index.ts","stores/maker.ts","services/auth.service.ts","stubs/firebase.ts","views/login/index.tsx","components/private-route/index.tsx","components/menu-app/index.tsx","views/no-match/index.tsx","models/order.ts","services/fcm.service.ts","stores/orders.ts","views/my-orders/index.tsx","views/order/confirm/index.tsx","models/notif.ts","stores/notif.ts","components/snack-add/index.tsx","views/order/index.tsx","views/error/index.tsx","views/catalog/index.tsx","views/product/index.tsx","App.tsx","index.tsx"],"names":["module","exports","Array","prototype","sortBy","propertyName","sortDirection","sortArguments","arguments","this","sort","objA","objB","result","argIndex","length","subRequest","Subject","subResponse","config","idToken","axios","setTimeout","authService","subToken","subscribe","token","responseType","timeout","transformRequest","data","headers","Authorization","next","JSON","stringify","transformResponse","create","func","other","cgu","cgr","support","baseURL","fcmPublicVapidKey","API","self","orders","ref","categories","prod","process","REACT_APP_STAGE","sub","BehaviorSubject","maker","httpClientService","get","conf","then","response","set","catch","e","console","error","isAuth","makerStore","load","window","firebase","auth","signOut","ProviderStub","addProfile","name","addScope","setCustomParameters","FirebaseStub","isSigned","authFns","userMock","email","idTokenMock","authDelayMock","getIdTokenPromise","getIdTokenPromiseResolve","Promise","resolve","FacebookAuthProvider","EmailAuthProvider","GoogleAuthProvider","usePublicVapidKey","onMessage","onTokenRefresh","log","onAuthStateChanged","fn","push","forEach","authFn","splice","findIndex","af","signInWithRedirect","provider","currentUser","getIdToken","init","Login","unregisterAuthObserver","state","loading","isSignedIn","from","sign","registerOnFirebase","props","location","setState","fromPathname","user","setIdToken","authenticated","style","position","left","top","transform","CircularProgress","className","to","pathname","Container","component","maxWidth","CssBaseline","Avatar","Typography","variant","Button","type","fullWidth","size","color","onClick","signGoogle","alt","src","GoogleIcon","signEmail","MailIcon","React","Component","PrivateRoute","children","rest","realCmp","render","history","match","createElement","useStyles","makeStyles","theme","createStyles","root","flexGrow","firstButton","marginRight","spacing","appBar","palette","grey","background","common","white","title","paddingRight","list","width","fullList","MenuApp","classes","useState","mode","setMode","setEmail","open","setOpen","useEffect","subMaker","substr","indexOf","unsubscribe","Drawer","anchor","onClose","List","ListItem","selected","button","key","ListItemIcon","ListItemText","primary","secondary","confirm","signout","reload","AppBar","Toolbar","IconButton","edge","aria-label","goBack","IciDriveBannerIcon","align","IciDriveTypoIcon","aria-controls","aria-haspopup","NoMatch","OrderState","fcm","lastFcm","messaging","isInit","bind","getToken","refreshedToken","err","payload","OrdersStore","id","isArray","order","put","MyOrders","statusLabel","PENDING","label","orange","CANCELLED","VERIFIED","CONFIRMED","green","REFUSED","ordersStore","map","i","ListItemAvatar","status","toUpperCase","total","moment","created","format","ListItemSecondaryAction","withStyles","getContrastText","deepOrange","backgroundColor","Confirm","text","setText","handleClose","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","message","withText","TextField","value","onChange","target","autoFocus","margin","inputProps","maxLength","DialogActions","onConfirm","okText","NotifType","notif","SnackAdd","subscription","notifStore","DEFAULT","event","reason","Snackbar","autoHideDuration","action","Fragment","fontSize","waitingConfirmation","icon","actions","Order","hidden","openCancelDialog","openRefusedDialog","openVerifiedDialog","O","params","txt","newOrder","reasonOf","update","print","phone","copyText","document","querySelector","select","setSelectionRange","execCommand","currentOrder","paymentsLabels","payments","acceptPaypal","acceptCards","acceptBankCheck","acceptCoins","filter","c","join","Grid","container","direction","justify","item","Chip","Alert","severity","readOnly","address","customer","lastname","firstname","place","slot","choices","TableContainer","Table","table","TableHead","TableRow","TableCell","TableBody","pc","quantity","product","price","description","colSpan","cancel","onClickVerifiedOrder","onClickRefusedOrder","SpeedDial","ariaLabel","SpeedDialIcon","onOpen","a","SpeedDialAction","tooltipTitle","tooltipOpen","onClickDialAction","Fab","minWidth","Error","Catalog","products","openCleanCart","activeIndex","openPreview","cart","wantToAdd","p","category","find","categoryId","Modal","aria-describedby","Paper","alignContent","alignItems","Card","available","CardHeader","subheader","avatar","CardMedia","image","height","CardContent","CardActions","disableSpacing","parseFloat","toFixed","aria-expanded","Collapse","in","unmountOnExit","volume","paragraph","weight","Product","createMuiTheme","App","concurrentCalls","subHttpClientRequest","subHttpClientResponse","fcmService","subOnRequest","subOnResponse","Backdrop","path","exact","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.924820d1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/google.752536d8.svg\";","module.exports = __webpack_public_path__ + \"static/media/mail.59ed2e77.svg\";","module.exports = __webpack_public_path__ + \"static/media/ici-drive-icon.546ec8b4.png\";","module.exports = __webpack_public_path__ + \"static/media/ici-drive-banner.117fc591.png\";","//https://stackoverflow.com/questions/6129952/javascript-sort-array-by-two-fields\nArray.prototype.sortBy = function (propertyName, sortDirection) {\n\n    var sortArguments = arguments;\n    this.sort(function (objA, objB) {\n\n        var result = 0;\n        for (var argIndex = 0; argIndex < sortArguments.length && result === 0; argIndex += 2) {\n\n            var propertyName = sortArguments[argIndex];\n            result = (objA[propertyName] < objB[propertyName]) ? -1 : (objA[propertyName] > objB[propertyName]) ? 1 : 0;\n\n            //Reverse if sort order is false (DESC)\n            result *= !sortArguments[argIndex + 1] ? 1 : -1;\n        }\n        return result;\n    });\n\n}","import axios, {AxiosRequestConfig} from 'axios';\nimport { Subscription, Subject } from 'rxjs';\nimport { HttpCall } from '../models/httpcall';\nimport authService from './auth.service';\n\n\nclass HttpClientService{\n    private subRequest = new Subject<HttpCall>();\n    private subResponse = new Subject<HttpCall>();\n\n    private config: AxiosRequestConfig;\n    private idToken: string|null = null;\n\n    public axios:any;\n\n    constructor(){\n        setTimeout(() => {\n            authService.subToken.subscribe( (token:any) => this.idToken = token );\n        },0);\n\n        this.config = {\n            responseType: 'json',\n            timeout: 15000,\n            transformRequest: [(data:any, headers:any)=>{\n                headers['Content-Type'] = 'application/json';\n                if(this.idToken !== null){\n                    headers.Authorization = `Bearer ${this.idToken}`;\n                }\n                this.subRequest.next({data, headers});\n                return JSON.stringify(data);\n            }],\n            transformResponse: [(data:any, headers:any)=>{\n                this.subResponse.next({data, headers});\n                return data;\n            }]\n        };\n        this.axios = axios.create(this.config);\n        //// Alter defaults after instance has been created\n        //instance.defaults.headers.common['Authorization'] = AUTH_TOKEN;\n    }\n\n    public subOnRequest(func:any): Subscription{\n        return this.subRequest.subscribe(func);\n    }\n\n    public subOnResponse(func:any): Subscription{\n        return this.subResponse.subscribe(func);\n    }\n}\n\nexport default new HttpClientService() ;","\nimport { Configuration } from \"./configuration\";\n\n\nconst DEV_API_BASEURL = '/api-mock';\nconst other: Configuration = {\n    cgu: 'https://docs.google.com/document/d/e/2PACX-1vRxz61BpPZL-YJXX2E6tvdYsI0PG1vxv1eGjxQ7TMfqififiO-Snb5pZU21bkjZgTHyENu3I5nFzxRZ/pub',\n    cgr: 'http://google.fr',\n    support: 'https://forms.gle/q4KYieunhwWVn1BR6',\n    baseURL: 'https://app.ici-drive.fr',\n    fcmPublicVapidKey: 'BO7yESbBXsx7ddVzYqvkNpWf-3S6sjqQxEoolQQ1OG02D0-nmrpowEsYRHuoGEzT4w5Np6Gdwto5FiLsS--sONw',\n    API: {\n        self: () => `${DEV_API_BASEURL}/makers/self.json`,\n        orders: (ref?:string) => `${DEV_API_BASEURL}/my-orders.json?ref=${ref}`,\n    },\n    categories:[\n        { \"label\": \"Viandes\", \"id\": \"viandes\"},\n        { \"label\": \"Oeufs\", \"id\": \"oeufs\"},\n        { \"label\": \"Laitiers\", \"id\": \"laitiers\"},\n        { \"label\": \"Epiceries\", \"id\": \"epiceries\"},\n        { \"label\": \"Fruits / Légumes\", \"id\": \"fruit-leg\"},\n        { \"label\": \"Mer\", \"id\": \"mer\"},\n        { \"label\": \"Glaces\", \"id\": \"glace\"},\n        { \"label\": \"Boissons\", \"id\": \"boissons\"},\n    ]\n} ;\n\nconst API_BASEURL = '/api';\nconst prod: Configuration = {\n    cgu: 'https://docs.google.com/document/d/e/2PACX-1vRxz61BpPZL-YJXX2E6tvdYsI0PG1vxv1eGjxQ7TMfqififiO-Snb5pZU21bkjZgTHyENu3I5nFzxRZ/pub',\n    cgr: '',\n    support: 'https://forms.gle/q4KYieunhwWVn1BR6',\n    baseURL: 'https://app.ici-drive.fr',\n    fcmPublicVapidKey: 'BO7yESbBXsx7ddVzYqvkNpWf-3S6sjqQxEoolQQ1OG02D0-nmrpowEsYRHuoGEzT4w5Np6Gdwto5FiLsS--sONw',\n    API: {\n        self: () => `${API_BASEURL}/admin/makers/self`,\n        orders: (ref?:string) => `${API_BASEURL}/admin/my-orders/${ref || ''}`,\n    },\n    categories:[\n        { \"label\": \"Viandes\", \"id\": \"viandes\"},\n        { \"label\": \"Oeufs\", \"id\": \"oeufs\"},\n        { \"label\": \"Laitiers\", \"id\": \"laitiers\"},\n        { \"label\": \"Epiceries\", \"id\": \"epiceries\"},\n        { \"label\": \"Fruits / Légumes\", \"id\": \"fruit-leg\"},\n        { \"label\": \"Mer\", \"id\": \"mer\"},\n        { \"label\": \"Glaces\", \"id\": \"glace\"},\n        { \"label\": \"Boissons\", \"id\": \"boissons\"},\n    ]\n} ;\n\nconst config = process.env.REACT_APP_STAGE === 'prod'  ? prod : other;\n\n  export default { ...config};","import {BehaviorSubject, Subscription} from 'rxjs';\nimport { Maker } from '../models/maker';\nimport { Store } from './store';\nimport httpClientService from '../services/http-client.service';\nimport conf from '../confs';\nimport {AxiosResponse} from 'axios';\n\nclass MakerStore implements Store<Maker|null>{\n    private sub = new BehaviorSubject<Maker|null>(null);\n\n    public set(maker: Maker|null): void{\n        this.sub.next(maker);\n    }\n\n    public subscribe(func:any): Subscription{\n        return this.sub.subscribe(func);\n    }\n\n    public load():void{\n        httpClientService.axios.get(conf.API.self())\n        .then((response: AxiosResponse<any>) => {\n            this.set(response.data);    \n        }).catch((e:any) => {\n            console.error(e);\n        });\n    }\n}\n\nexport default new MakerStore() ;","import { BehaviorSubject } from \"rxjs\";\nimport makerStore from '../stores/maker';\n\nexport class AuthService{\n    public subToken = new BehaviorSubject<string|null>(null);\n    public isAuth = false;\n\n    public authenticated(): void {\n        if(!this.isAuth){\n            makerStore.load();\n        }\n        this.isAuth = true;\n    }\n\n    public setIdToken(idToken:string){\n        this.subToken.next(idToken);\n    }\n\n    signout() {\n        this.isAuth = false;\n        this.subToken.next(null);\n        \n        if((window as any).firebase){\n            (window as any).firebase.auth().signOut();\n        }\n    }\n}\n\nexport default new AuthService() ;","function ProviderStub(){}\nProviderStub.prototype.addProfile = (name: string) => {}\nProviderStub.prototype.addScope = (name: string) => {}\nProviderStub.prototype.setCustomParameters = (data: any) => {}\n\n\nexport class FirebaseStub {\n\n    private isSigned = true;\n\n    private authFns:any = [];\n    private userMock:any = { email: 'ff.fremont.florent@gmail.com' };\n    private idTokenMock = 'azerty';\n    private authDelayMock = 2000;\n\n    getIdTokenPromise:any;\n    getIdTokenPromiseResolve:any;\n\n\n    constructor(){\n        this.getIdTokenPromise = new Promise((resolve) => {\n            this.getIdTokenPromiseResolve = resolve;\n        });\n    }\n\n    public init(){\n        const me:any = this;\n        me.auth.FacebookAuthProvider = () => ProviderStub;\n        me.auth.EmailAuthProvider = () => ProviderStub;\n        me.auth.GoogleAuthProvider = () => ProviderStub;\n\n        return this;\n    }\n\n    public messaging(){\n        return {\n            usePublicVapidKey: () => {},\n            onMessage: () => {},\n            onTokenRefresh: () => {}\n        };\n    }\n\n    public auth() {\n        return {\n                signOut:() => {console.log('signOut')},\n                onAuthStateChanged: (fn: any) => {\n                this.authFns.push(fn);\n\n                if(this.isSigned){\n                    setTimeout( () => {\n                        this.authFns.forEach((authFn:any) => authFn(this.userMock))\n                        this.getIdTokenPromiseResolve(this.idTokenMock);\n                    }, this.authDelayMock);                \n                }else{\n                    this.authFns.forEach((authFn:any) => authFn(null))\n                }\n\n                return () => { this.authFns.splice( this.authFns.findIndex((af:any) => af === fn), 1) };\n            },\n            signInWithRedirect: (provider:any) => {\n                setTimeout(() =>{ // simulate auth process\n                    this.authFns.forEach((authFn:any) => authFn(this.userMock));\n                    this.getIdTokenPromiseResolve(this.idTokenMock);\n                },1000);\n            },\n            currentUser: {\n                getIdToken: () => this.getIdTokenPromise\n            }\n        };\n    }\n}\n\n","import React from 'react';\nimport './Login.scss';\nimport {\n  Redirect\n} from 'react-router-dom';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport GoogleIcon from '../../assets/images/google.svg';\nimport MailIcon from '../../assets/images/mail.svg';\nimport authService from '../../services/auth.service';\nimport {FirebaseStub} from '../../stubs/firebase';\n\nif(process.env.REACT_APP_STAGE !== 'prod'){\n  (window as any).firebase = (new FirebaseStub()).init();\n}\n\nclass Login extends React.Component<{history:any,location:any}, {loading:boolean, isSignedIn:boolean, from:string}> {\n  unregisterAuthObserver: any = null;\n\n  // The component's Local state.\n  state = {\n    loading: true, // waiting onAuthStateChanged\n    isSignedIn: false, // Local signed-in state.\n    from: '/'\n  };\n\n  private sign(provider:any){\n    provider.addScope('profile');\n    provider.addScope('email');\n    (window as any).firebase.auth().signInWithRedirect(provider);\n  }\n\n  signEmail(){\n    this.sign(process.env.REACT_APP_STAGE === 'prod' ? new (window as any).firebase.auth.EmailAuthProvider() : new ((window as any).firebase.auth.EmailAuthProvider()));\n  }\n\n  signGoogle(){\n    const provider:any = process.env.REACT_APP_STAGE === 'prod' ?  new (window as any).firebase.auth.GoogleAuthProvider() : new ((window as any).firebase.auth.GoogleAuthProvider());\n    this.sign(provider);    \n  }\n\n  componentDidMount() {\n    this.registerOnFirebase();\n\n    if(this.props.location){\n      if(this.props.location.state){\n        this.setState({from: this.props.location.state.fromPathname});\n      }else{\n        this.setState({from: '/'});\n      }      \n    }\n  }\n\n  private registerOnFirebase(){\n    this.unregisterAuthObserver = (window as any).firebase.auth().onAuthStateChanged(\n      (user:any) => {\n        // déclenche la redirection\n        this.setState({ loading: false, isSignedIn: !!user })\n        if(user){\n          (window as any).firebase.auth().currentUser.getIdToken().then((token:string) => authService.setIdToken(token));\n\n          // avec le idToken, self() marchera\n          authService.authenticated()\n        }else{\n          // no authenticated, noop show buttons\n        }        \n      }\n    );\n  }\n\n  // Make sure we un-register Firebase observers when the component unmounts.\n  componentWillUnmount() {\n    if(this.unregisterAuthObserver){\n      this.unregisterAuthObserver();\n    }\n  }\n\n  render() {\n    if(this.state.loading){\n      return <div\n      style={{\n          position: 'absolute', \n          left: '50%', \n          top: '50%',\n          transform: 'translate(-50%, -50%)'\n      }}\n  ><CircularProgress className=\"wait-auth\" /></div>;\n    }else{\n      if (this.state.isSignedIn) {\n        return <Redirect\n          to={{\n            pathname: this.state.from,\n            state: { from: '/login' }\n          }}\n        />;\n      } else {\n        return <div className=\"login\">\n          <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div className=\"paper\">\n              <Avatar className=\"avatar\">\n                <LockOutlinedIcon />\n              </Avatar>\n              <Typography component=\"h1\" variant=\"h5\">\n                Connexion\n          </Typography>\n              \n              <Button\n                type=\"button\"\n                fullWidth\n                size=\"large\"\n                variant=\"contained\"\n                color=\"default\"\n                onClick={() => this.signGoogle()}\n                className=\"provider google\"\n              >\n                <img alt=\"google\" src={GoogleIcon} /> Connexion par Google\n            </Button>\n            <Button\n                type=\"button\"\n                fullWidth\n                color=\"primary\"\n                size=\"large\"\n                onClick={() => this.signEmail()}\n                variant=\"contained\"\n                className=\"provider email\"\n              >\n                <img alt=\"mail\" src={MailIcon} /> Connexion par email\n            </Button>\n            </div>\n          </Container>\n  \n        </div>;\n      }\n    }\n\n    \n    \n  }\n}\n\n\nexport default Login;\n","import React from 'react';\nimport {\n  Route,\n  Redirect,\n  RouteProps,\n} from 'react-router-dom';\nimport authService from '../../services/auth.service';\n\n\nconst PrivateRoute = (props: RouteProps) => {\n  const {children, component, ...rest} = props;\n  const realCmp:any = props.component;\n  return (\n    <Route\n    {...rest}\n    render={({ location, history, match }) =>\n        authService.isAuth ? (\n          React.createElement(realCmp, {location, history, match})\n        ) : (\n                <Redirect\n                    to={{\n                        pathname: '/login',\n                        state: { fromPathname: location.pathname }\n                    }}\n                />\n            )\n    }\n/>\n  );\n};\n\n\nexport default PrivateRoute;\n","import React, { useState, useEffect } from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport ImportContactsIcon from '@material-ui/icons/ImportContacts';\nimport IciDriveTypoIcon from '../../assets/images/ici-drive-icon.png';\nimport IciDriveBannerIcon from '../../assets/images/ici-drive-banner.png';\nimport './MenuApp.scss';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport LibraryBooksIcon from '@material-ui/icons/LibraryBooks';\nimport RoomIcon from '@material-ui/icons/Room';\nimport conf from '../../confs';\nimport authService from '../../services/auth.service';\nimport StorefrontIcon from '@material-ui/icons/Storefront';\nimport makerStore from '../../stores/maker';\nimport { Maker } from '../../models/maker';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n    },\n    firstButton: {\n      marginRight: theme.spacing(2),\n    },\n    appBar: {\n      color: theme.palette.grey[900],\n      background: theme.palette.common.white\n    },\n    title: {\n      flexGrow: 1,\n      paddingRight:50,\n    },\n    list: {\n      width: 250,\n    },\n    fullList: {\n      width: 'auto',\n    },\n  }),\n);\n\nconst MenuApp = (props: any) => {\n  const classes = useStyles();\n  const [mode, setMode] = useState('full');\n  const [auth] = useState(false);\n  const [email, setEmail] = useState('');\n  const [open, setOpen] = useState(false);\n\n  React.useEffect(() => {\n    setMode(props.mode);\n  }, [props.mode])\n\n  useEffect(() => {\n    const subMaker = makerStore.subscribe((maker:Maker) =>{\n      if(maker && maker.email)\n        setEmail(maker.email.substr(0, maker.email.indexOf('@')));\n    })\n    return () => {\n      // Nettoyage de l'abonnement\n      subMaker.unsubscribe();\n    };\n  });\n\n  const logout = () => {\n    if(window.confirm('Voulez-vous déconnecter votre appareil de votre compte ?')){\n      authService.signout();\n      window.location.reload();\n    }\n  }\n  \n  return (\n    \n    <div className={classes.root}>\n      <Drawer anchor=\"left\" open={open} onClose={() => setOpen(false)}>\n        <List className=\"drawer-list\">\n        {email && (<ListItem selected button key=\"connected\">\n            <ListItemIcon><AccountCircleIcon /></ListItemIcon>\n            <ListItemText primary=\"Connecté\" secondary={email} />\n          </ListItem>)}\n         \n          <ListItem button key=\"catalog\" onClick={() => props.history.push('/products')}>\n            <ListItemIcon><ImportContactsIcon /></ListItemIcon>\n            <ListItemText primary=\"Catalogue produits\" />\n          </ListItem>\n          <ListItem button key=\"point\" onClick={() => props.history.push('/my-profil')}>\n            <ListItemIcon><RoomIcon /></ListItemIcon>\n            <ListItemText primary=\"Retrait &amp; livraison\" />\n          </ListItem>\n          <ListItem button key=\"account\" onClick={() => props.history.push('/my-profil')}>\n            <ListItemIcon><StorefrontIcon /></ListItemIcon>\n            <ListItemText primary=\"Mon drive\" />\n          </ListItem>\n\n          <ListItem button key=\"support\" onClick={() => window.open(conf.support)}>\n            <ListItemIcon><BugReportIcon /></ListItemIcon>\n            <ListItemText primary=\"Support\" secondary=\"Déclarer un incident\" />\n          </ListItem>\n          <ListItem button key=\"mentions\">\n            <ListItemIcon><LibraryBooksIcon /></ListItemIcon>\n            <ListItemText primary=\"Mentions\" secondary=\"CGU, CGR, ...\" />\n          </ListItem>\n          \n          {email && (<ListItem button key=\"logout\" onClick={logout}>\n            <ListItemIcon><ExitToAppIcon /></ListItemIcon>\n            <ListItemText primary=\"Se déconnecter\" secondary=\"Dissocier cet appareil\" />\n          </ListItem>)}\n        </List>\n      </Drawer>\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n          {mode === 'full' && (\n            <IconButton edge=\"start\" className={classes.firstButton} onClick={() => setOpen(true)} color=\"inherit\" aria-label=\"menu\">\n              <MenuIcon />\n            </IconButton>\n          )}\n          {mode !== 'full' && (\n            <IconButton edge=\"start\" className={classes.firstButton} onClick={() => props.history.goBack()} color=\"inherit\" aria-label=\"précédent\">\n              <ArrowBackIosIcon />\n            </IconButton>\n          )}\n\n\n          {mode === 'full' && (\n            <Typography variant=\"h6\" className={classes.title}>\n              <img alt=\"icon ici drive\" className=\"ici-drive-icon\" src={IciDriveBannerIcon} />\n            </Typography>\n          )}\n          {['light'].indexOf(mode) > -1 && (\n            <Typography variant=\"h6\" align=\"center\" className={classes.title}>\n              <img alt=\"icon ici drive\" className=\"ici-drive-icon\" src={IciDriveTypoIcon} />\n\n            </Typography>\n          )}\n         \n          {['my-orders'].indexOf(mode) > -1 && (\n            <Typography variant=\"h6\" align=\"center\" className={classes.title}>\n              Mes réservations\n            </Typography>\n          )}\n          {['catalog'].indexOf(mode) > -1 && (\n            <Typography variant=\"h6\" align=\"center\" className={classes.title}>\n              Catalogue\n            </Typography>\n          )}\n          {['product-edit'].indexOf(mode) > -1 && (\n            <Typography variant=\"h6\" align=\"center\" className={classes.title}>\n              Editer produit\n            </Typography>\n          )}\n          {['product-new'].indexOf(mode) > -1 && (\n            <Typography variant=\"h6\" align=\"center\" className={classes.title}>\n              Ajouter produit\n            </Typography>\n          )}\n          \n         \n\n\n          {auth && (\n            <div>\n              <IconButton\n                aria-label=\"Mes réservations\"\n                aria-controls=\"menu-appbar\"\n                aria-haspopup=\"true\"\n                color=\"inherit\"\n              >\n                <AccountCircle />\n              </IconButton>\n\n\n            </div>\n          )}\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n\nexport default MenuApp;","import React from 'react';\nimport './NoMatch.scss';\nimport MenuApp from '../../components/menu-app';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport Typography from '@material-ui/core/Typography';\n\nfunction NoMatch(props: any) {\n  return (\n    <div className=\"no-match\">\n      <MenuApp mode=\"light\" history={props.history} />\n\n      <div className=\"area\">\n        <ErrorOutlineIcon />\n        <Typography variant=\"h4\">Page introuvable</Typography>\n\n      </div>\n    </div>\n  );\n}\n\nexport default NoMatch;\n","import { Maker } from \"./maker\";\nimport { Product } from \"./product\";\nimport { User } from \"./user\";\n\nexport interface ProductChoice{\n    product:Product;\n    quantity:number;\n}\n\nexport enum OrderState{\n    PENDING = 'pending',\n\n    VERIFIED = 'verified',\n    REFUSED = 'refused',\n\n    CONFIRMED = 'confirmed',\n    CANCELLED = 'cancelled'\n}\n\nexport interface Order{\n   created:number;\n   updated:number;\n   ref:string;\n   id?:string;\n   status?:OrderState; // ATTENTE_VALIDATION, VALIDEE, REFUSEE, ANNULEE\n   \n   choices: ProductChoice[],\n   maker?: Maker,\n   total:number;\n   slot?: number;\n   reasonOf?:string;\n   customer?: User;\n}","//import httpClientService from './http-client.service';\nimport conf from '../confs';\n\nexport class FcmService {\n    fcm: string = '';\n    lastFcm: string = '';\n    messaging: any;\n    isInit = false;\n\n    public init() {\n        if(this.isInit){return;}\n        this.isInit = true;\n\n        if ((window as any).firebase) {\n            this.messaging = (window as any).firebase.messaging();\n            // Add the public key generated from the console here.\n            this.messaging.usePublicVapidKey(conf.fcmPublicVapidKey);\n            this.messaging.onMessage(this.onMessage.bind(this));\n            this.messaging.onTokenRefresh(this.onTokenRefresh.bind(this));\n        }\n\n        setTimeout(() => {\n            // à chaque rechargement de l'utilisateur, on met à jour le refresh s'il a changé\n            /*myProfilStore.subscribe((myProfil: User) => {\n                if (this.lastFcm !== this.fcm) {\n                    this.lastFcm = this.fcm;\n                    myProfil.fcm = this.fcm;\n\n                    httpClientService.axios.put(conf.API.myProfil(), myProfil).catch((e: any) => console.log(e));\n                }\n            })*/\n        }, 0);\n    }\n\n    onTokenRefresh() {\n        this.messaging.getToken().then((refreshedToken: string) => {\n            console.log('Token refreshed.');\n            this.fcm = refreshedToken;\n        }).catch((err: any) => {\n            console.log('Unable to retrieve refreshed token ', err);\n        });\n\n    }\n\n    onMessage(payload: any) {\n        console.log('Message received. ', payload);\n\n    }\n}\n\nexport default new FcmService();","import {BehaviorSubject, Subscription} from 'rxjs';\nimport { Store } from './store';\nimport {AxiosResponse} from 'axios';\nimport httpClientService from '../services/http-client.service';\nimport conf from '../confs';\nimport { Order } from '../models/order';\n\nexport class OrdersStore implements Store<Order[]>{\n    private sub = new BehaviorSubject<Order[]>([]);\n\n    public set(orders: Order[]): void{\n        this.sub.next(orders);\n    }\n\n    public subscribe(func:any): Subscription{\n        return this.sub.subscribe(func);\n    }\n\n    static async update(order: Order){\n        await httpClientService.axios.put(conf.API.orders(order.id), order);\n    }\n    /**\n     * \n     */\n    public load(id?:string):Promise<Order[]>{\n        return httpClientService.axios.get(conf.API.orders(id))\n        .then((response: AxiosResponse<any>) => {\n            if(!Array.isArray(response.data)){\n                this.set([response.data]);\n            }else{\n                this.set(response.data);\n            }            \n            return response.data;\n        });\n    }\n}\n\nexport default new OrdersStore() ;","import React from 'react';\nimport './MyOrders.scss';\nimport MenuApp from '../../components/menu-app';\nimport ordersStore from '../../stores/orders';\nimport { Subscription } from 'rxjs';\nimport { Order, OrderState } from '../../models/order';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport * as moment from 'moment';\nimport { withStyles, Theme } from '@material-ui/core/styles';\nimport { deepOrange, grey, green } from '@material-ui/core/colors';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport IconButton from '@material-ui/core/IconButton';\n\n\n\nconst useStyles = (theme: Theme) => ({\n  orange: {\n    color: theme.palette.getContrastText(deepOrange[500]),\n    backgroundColor: deepOrange[500],\n  },\n  grey:{\n    color: theme.palette.getContrastText(grey[500]),\n    backgroundColor: grey[500],\n  },\n  green:{\n    color: theme.palette.getContrastText(green[500]),\n    backgroundColor: green[500],\n  }\n});\n\nclass MyOrders extends React.Component<{ history: any, classes: any }, { orders: Order[] }>{\n\n  \n  statusLabel:any = {};\n  state = { orders: [] };\n  sub: Subscription | null = null;\n\n  componentWillUnmount() {\n    this.sub?.unsubscribe();\n  }\n\n  componentDidMount() {\n    this.statusLabel[OrderState.PENDING] = {label: 'A vérifier', color: this.props.classes.orange};\n    this.statusLabel[OrderState.CANCELLED] = {label: 'Annulée', color: this.props.classes.grey};\n    this.statusLabel[OrderState.VERIFIED] = {label: 'En attente de confirmation', color: this.props.classes.orange};\n    this.statusLabel[OrderState.CONFIRMED] = {label: 'Confirmée', color: this.props.classes.green};\n    this.statusLabel[OrderState.REFUSED] = {label:'Refusée', color: this.props.classes.grey}\n\n    \n    this.sub = ordersStore.subscribe((orders: Order[]) => {\n      console.log('MyOrders > ordersStore.sub ',orders);\n      if(orders)\n        (orders as any).sortBy('created',true);\n      this.setState({ orders : orders || [] })\n    });\n\n    // charge la liste des commandes\n    ordersStore.load();\n  }\n\n  render() {\n    return (<div className=\"my-orders\">\n      <MenuApp mode={'full'} history={this.props.history} />\n\n       <div className=\"orders\">\n        <List>\n          {this.state.orders.map((order: Order, i) => (\n            <ListItem key={`li_${i}`} onClick={() => this.props.history.push(`/my-orders/${order.id}`)}>\n              <ListItemAvatar>\n                <Avatar className={this.statusLabel[(order.status as any)].color}>\n                  {this.statusLabel[(order.status as any)].label.substr(0,1).toUpperCase()}\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText primary={this.statusLabel[(order.status as any)].label+` (${order.total}€)`} secondary={moment.default(order.created).format('ddd D MMM à HH:mm')} />\n              <ListItemSecondaryAction>\n                    <IconButton edge=\"end\" aria-label=\"next\">\n                      <ArrowForwardIosIcon />\n                    </IconButton>\n                  </ListItemSecondaryAction>\n            </ListItem>\n          ))}\n\n\n\n        </List>\n      </div>\n    </div>);\n  }\n}\n\nexport default withStyles(useStyles)(MyOrders);\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nexport default function Confirm(props:any) {\n  const [open, setOpen] = React.useState(false);\n  const [text, setText] = React.useState('');\n  \n\n  React.useEffect(() => {\n    setOpen(props.open);\n  }, [props.open]);\n\n  const handleClose = () => {\n    setOpen(false);\n    props.onClose();\n  };\n\n  const handleConfirm = () => {\n    setOpen(false);\n    props.onConfirm(text);\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            {props.message}\n          </DialogContentText>\n          {props.withText && <TextField\n            value={text}\n            onChange={(e) => setText(e.target.value)}\n            autoFocus\n            margin=\"dense\"\n            id=\"remarque\"\n            label=\"Remarque\"\n            type=\"text\"\n            inputProps={{ maxLength: 100 }}\n            fullWidth\n          />}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Annuler\n          </Button>\n          <Button onClick={handleConfirm} color=\"primary\">\n            {props.okText || \"Valider\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n  );\n}\n","export interface Notif{\n    type:NotifType;\n    message:string;\n}\n\nexport enum NotifType{\n    DEFAULT\n}","import { Notif } from \"../models/notif\";\nimport { Subject, Subscription } from \"rxjs\";\nimport { Store } from \"./store\";\n\nclass NotifStore implements Store<Notif>{\n\n    private sub = new Subject<Notif>();\n\n    public set(notif: Notif): void{\n        this.sub.next(notif);\n    }\n\n    public subscribe(func:any): Subscription{\n        return this.sub.subscribe(func);\n    }\n}\n\nexport default new NotifStore();","\nimport React, { useEffect } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport notifStore from '../../stores/notif';\nimport { Notif, NotifType } from '../../models/notif';\n\nconst SnackAdd = (props: any) => {\n    const [open, setOpen] = React.useState(false);\n    const [text, setText] = React.useState('');\n\n    useEffect(() => {\n        const subscription = notifStore.subscribe((notif: Notif) => {\n            if ([NotifType.DEFAULT].indexOf(notif.type) > -1){\n                setText(notif.message);\n                setOpen(true);                \n            }\n        });\n        return () => {\n            // Nettoyage de l'abonnement\n            subscription.unsubscribe();\n        };\n    });\n\n\n    const handleClose = (event: React.SyntheticEvent | React.MouseEvent, reason?: string) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n\n        setOpen(false);\n    };\n\n    return (\n        <Snackbar\n            open={open}\n            autoHideDuration={800}\n            onClose={handleClose}\n            message={text ? text : \"Panier actualisé\"}\n            action={\n                <React.Fragment>\n                    <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\n                        <CloseIcon fontSize=\"small\" />\n                    </IconButton>\n                </React.Fragment>\n            }\n        />\n    );\n}\n\nexport default SnackAdd;","import React from 'react';\nimport './Order.scss';\nimport ordersStore, { OrdersStore } from '../../stores/orders';\nimport { Subscription } from 'rxjs';\nimport * as O from '../../models/order';\nimport * as moment from 'moment';\nimport { withStyles, Theme } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Alert from '@material-ui/lab/Alert';\nimport { deepOrange, grey, green } from '@material-ui/core/colors';\nimport Chip from '@material-ui/core/Chip';\nimport Fab from '@material-ui/core/Fab';\nimport { Maker } from '../../models/maker';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport ClearIcon from '@material-ui/icons/Clear';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\n\nimport PrintIcon from '@material-ui/icons/Print';\nimport CheckIcon from '@material-ui/icons/Check';\nimport CloseIcon from '@material-ui/icons/Close';\nimport PhoneIcon from '@material-ui/icons/Phone';\nimport AlternateEmailIcon from '@material-ui/icons/AlternateEmail';\n\nimport Confirm from './confirm';\nimport MenuApp from '../../components/menu-app';\nimport SnackAdd from '../../components/snack-add';\n\n\nimport notifStore from '../../stores/notif';\nimport { NotifType } from '../../models/notif';\n\nconst waitingConfirmation = [\n  { icon: <PrintIcon />, name: 'print', label: 'Imprimer' },\n  { icon: <ClearIcon />, name: 'cancel', label: 'Annuler' }\n];\nconst actions = [\n  { icon: <PrintIcon />, name: 'print', label: 'Imprimer' },\n  { icon: <PhoneIcon />, name: 'phone', label: 'Contacter' },\n  { icon: <AlternateEmailIcon />, name: 'copy-email', label: 'Copier' },\n  { icon: <ClearIcon />, name: 'cancel', label: 'Annuler' }\n];\n\nconst useStyles = (theme: Theme) => ({\n  table: {\n    minWidth: 650,\n  },\n  orange: {\n    color: theme.palette.getContrastText(deepOrange[500]),\n    backgroundColor: deepOrange[500],\n  },\n  grey: {\n    color: theme.palette.getContrastText(grey[500]),\n    backgroundColor: grey[500],\n  },\n  green: {\n    color: theme.palette.common.white,\n    backgroundColor: green[500],\n  }\n});\n\nclass Order extends React.Component<{ history: any, classes: any, match: any }, { openVerifiedDialog: boolean, openRefusedDialog: boolean, openCancelDialog: boolean, order: O.Order | null, open: boolean, hidden: boolean }>{\n\n  state = { order: null, open: false, hidden: false, openCancelDialog: false, openRefusedDialog: false, openVerifiedDialog: false };\n  status: any = {};\n  sub: Subscription | null = null;\n\n\n  componentWillUnmount() {\n    this.sub?.unsubscribe();\n  }\n\n  componentDidMount() {\n    this.status[O.OrderState.PENDING] = { label: 'A vérifier', color: this.props.classes.orange };\n    this.status[O.OrderState.CANCELLED] = { label: 'Annulée', color: this.props.classes.grey };\n    this.status[O.OrderState.VERIFIED] = { label: 'En attente de confirmation', color: this.props.classes.orange };\n    this.status[O.OrderState.CONFIRMED] = { label: 'Confirmée', color: this.props.classes.green };\n    this.status[O.OrderState.REFUSED] = { label: 'Refusée', color: this.props.classes.grey }\n\n    const id: string = this.props.match.params.id;\n    this.sub = ordersStore.subscribe((orders: O.Order[]) => {\n      console.log('Order > ordersStore.sub ', orders);\n      if (orders && orders.length) {\n        this.setState({ order: orders[0] });\n      }\n    });\n\n    // charge la liste des commandes\n    ordersStore.load(id);\n  }\n\n  onClickVerifiedOrder(txt: string) {\n    const newOrder: O.Order = { ...(this.state.order as any) };\n    newOrder.reasonOf = txt;\n    newOrder.status = O.OrderState.VERIFIED;\n    OrdersStore.update(newOrder)\n      .then(() => ordersStore.load(this.props.match.params.id))\n      .catch(() => this.props.history.push('/error'));\n  }\n\n  onClickRefusedOrder(txt: string) {\n    const newOrder: O.Order = { ...(this.state.order as any) };\n    newOrder.reasonOf = txt;\n    newOrder.status = O.OrderState.REFUSED;\n    OrdersStore.update(newOrder)\n      .then(() => ordersStore.load(this.props.match.params.id))\n      .catch(() => this.props.history.push('/error'));\n  }\n\n\n  cancel(text: string) {\n    const newOrder: O.Order = { ...(this.state.order as any) };\n    newOrder.reasonOf = text;\n    newOrder.status = O.OrderState.CANCELLED;\n    OrdersStore.update(newOrder)\n      .then(() => this.props.history.push('/my-orders'))\n      .catch(() => this.props.history.push('/error'));\n  }\n\n  onClickDialAction(action: any) {\n    this.setState({ open: false });\n    if (action && (action.name === 'print')) {\n      window.print();\n    } else if (action && (action.name === 'cancel')) {\n      this.setState({ openCancelDialog: true });\n    } else if (action && (action.name === 'phone')) {\n      window.open(`tel:${(this.state.order as any).maker.phone}`, '_blank');\n    } else if (action && (action.name === 'copy-email')) {\n      const copyText = document.querySelector('#customer_email') as any;\n      if (copyText) {\n        /* Select the text field */\n        copyText.select();\n        copyText.setSelectionRange(0, 99999); /*For mobile devices*/\n\n        /* Copy the text inside the text field */\n        document.execCommand(\"copy\");\n\n        notifStore.set({ message: 'Copier dans le presse-papier', type: NotifType.DEFAULT })\n      }\n    }\n  }\n\n  render() {\n    const currentOrder: O.Order = (this.state.order as any) as O.Order;\n    const maker: Maker = (currentOrder?.maker as any) as Maker;\n\n\n\n    let paymentsLabels = '';\n    if (maker && maker.payments && !maker.payments.acceptPaypal) {\n      paymentsLabels = [\n        maker.payments?.acceptCards ? `par carte` : null,\n        maker.payments?.acceptBankCheck ? `par chèque` : null,\n        maker.payments?.acceptCoins ? `en espèce` : null].filter(c => c !== null).join(' / ');\n    } else if (maker && maker.payments && maker.payments.acceptPaypal) {\n      paymentsLabels = 'en ligne via Paypal';\n    }\n\n    return (<div className=\"order\">\n      <MenuApp mode=\"light\" history={this.props.history} />\n      {currentOrder && (<Grid container direction=\"column\" justify=\"center\" spacing={1}>\n\n        <SnackAdd />\n        <Grid item>\n          <Chip label={this.status[(currentOrder.status as any)].label} className={this.status[(currentOrder.status as any)].color} />\n        </Grid>\n\n        {(currentOrder.status === O.OrderState.CONFIRMED) && paymentsLabels && (<Grid item>\n          <Alert severity=\"warning\">\n            <strong>Consignes de paiement : </strong>{paymentsLabels}\n          </Alert>\n        </Grid>)}\n\n        {currentOrder.reasonOf && (<Grid item>\n          <Alert severity=\"info\">{currentOrder.reasonOf}</Alert>\n        </Grid>)}\n\n\n        <Grid item>\n          <Grid container direction=\"column\" justify=\"center\" spacing={1}>\n            <Grid item>\n              <TextField label=\"Référence\" variant=\"filled\" fullWidth={true} value={currentOrder.ref} inputProps={{ readOnly: true }} />\n            </Grid>\n            <Grid item>\n              <TextField label=\"Réalisée le\" variant=\"filled\" fullWidth={true} value={moment.default(currentOrder.created).format('ddd D MMM à HH:mm')} inputProps={{ readOnly: true }} />\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item>\n          <Grid className=\"my-group\" container direction=\"column\" justify=\"center\" spacing={1}>\n            <Grid item>\n              <TextField label=\"Vendeur\" variant=\"filled\" fullWidth={true} value={maker.name} inputProps={{ readOnly: true }} />\n            </Grid>\n            {maker.phone && (<Grid item>\n              <TextField label=\"Téléphone\" variant=\"filled\" fullWidth={true} value={maker.phone} inputProps={{ readOnly: true }} />\n            </Grid>)}\n            {maker.address && (<Grid item>\n              <TextField label=\"Adresse\" variant=\"filled\" fullWidth={true} value={maker.address} inputProps={{ readOnly: true }} />\n            </Grid>)}\n          </Grid>\n        </Grid>\n        <Grid item>\n          <Grid container className=\"my-group\" direction=\"column\" justify=\"center\" spacing={1}>\n            <Grid item>\n              <TextField label=\"@ Client\" id=\"customer_email\" variant=\"filled\" fullWidth={true} value={currentOrder.customer?.email} inputProps={{ readOnly: true }} />\n            </Grid>\n            {currentOrder.customer?.lastname && currentOrder.customer?.firstname && (<Grid item>\n              <TextField label=\"Nom / Prénom\" variant=\"filled\" fullWidth={true} value={`${currentOrder.customer?.lastname} ${currentOrder.customer?.firstname}`} inputProps={{ readOnly: true }} />\n            </Grid>)}\n            {currentOrder.customer?.phone && (<Grid item>\n              <TextField label=\"Téléphone\" id=\"customer_phone\" variant=\"filled\" fullWidth={true} value={currentOrder.customer?.phone} inputProps={{ readOnly: true }} />\n            </Grid>)}\n            {currentOrder.customer?.address && (<Grid item>\n              <TextField label=\"Adresse\" variant=\"filled\" fullWidth={true} value={currentOrder.customer?.address} inputProps={{ readOnly: true }} />\n            </Grid>)}\n          </Grid>\n        </Grid>\n\n\n        <Grid item>\n          <Grid container direction=\"column\" justify=\"center\" spacing={1}>\n            <Grid item>\n              <TextField label=\"Retrait / livraison\" variant=\"filled\" fullWidth={true} value={maker.place.label} inputProps={{ readOnly: true }} />\n            </Grid>\n            <Grid item>\n              <TextField label=\"Adresse\" variant=\"filled\" fullWidth={true} value={maker.place.address} inputProps={{ readOnly: true }} />\n            </Grid>\n            <Grid item>\n              <TextField label=\"Horaire du retrait\" variant=\"filled\" fullWidth={true} value={moment.default(currentOrder.slot).format('ddd D MMM à HH:mm')} inputProps={{ readOnly: true }} />\n            </Grid>\n          </Grid>\n        </Grid>\n\n\n      </Grid>)}\n\n      {currentOrder && currentOrder.choices && (<TableContainer>\n        <Table className={this.props.classes.table} aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"center\">Quantité</TableCell>\n              <TableCell align=\"center\">Réf.</TableCell>\n              <TableCell align=\"center\">P.U.</TableCell>\n              <TableCell align=\"center\">Description</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {currentOrder.choices.map((pc: O.ProductChoice, i) => (\n              <TableRow key={`pc_${i}`}>\n                <TableCell align=\"center\">{pc.quantity}</TableCell>\n                <TableCell align=\"center\">{pc.product.ref}</TableCell>\n                <TableCell align=\"center\">{pc.product.price}</TableCell>\n                <TableCell align=\"center\">{pc.product.description}</TableCell>\n              </TableRow>\n            ))}\n            <TableRow>\n              <TableCell colSpan={3} align=\"right\">Total</TableCell>\n              <TableCell align=\"center\">{currentOrder.total || 'ERREUR'}€</TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </TableContainer>)}\n\n      <Confirm title=\"Annuler la commande\" withText={true} onClose={() => this.setState({ openCancelDialog: false })} onConfirm={(txt: string) => this.cancel(txt)} message=\"Je souhaite annuler pour le motif :\" open={this.state.openCancelDialog} />\n\n\n      <Confirm title=\"Vérification de stocks\"\n        withText={true}\n        onClose={() => this.setState({ openVerifiedDialog: false })}\n        onConfirm={(txt: string) => this.onClickVerifiedOrder(txt || '')}\n        okText={`J'ai vérifié`}\n        message=\"La commande passera à l'état 'à confirmer' par le demandeur. Dès qu'elle sera confirmée, vous serez notifié.\"\n        open={this.state.openVerifiedDialog} />\n\n      <Confirm title=\"Refuser la demande\"\n        withText={true}\n        onClose={() => this.setState({ openRefusedDialog: false })}\n        onConfirm={(txt: string) => this.onClickRefusedOrder(txt || '')}\n        okText={`Je refuse`}\n        message=\"La commande passera à l'état 'refuser'. Merci d'indiquer un motif.\"\n        open={this.state.openRefusedDialog} />\n\n\n\n      {/* Actions en fonction des états */}\n\n      {currentOrder && currentOrder.status !== O.OrderState.PENDING && (<SpeedDial\n        ariaLabel=\"SpeedDial tooltip example\"\n        className=\"my-speed-dial\"\n        hidden={this.state.hidden}\n        icon={<SpeedDialIcon />}\n        onClose={() => this.setState({ open: false })}\n        onOpen={() => this.setState({ open: true })}\n        open={this.state.open}\n      >\n        {(currentOrder.status === O.OrderState.CONFIRMED ? waitingConfirmation : actions)\n        .filter(a => ((currentOrder.status === O.OrderState.CANCELLED) || (\n          currentOrder.status === O.OrderState.REFUSED) )&& a.name === 'cancel' ? false : true)\n        .map((action) => (\n          <SpeedDialAction\n            key={action.name}\n            icon={action.icon}\n            tooltipTitle={action.label}\n            tooltipOpen\n            onClick={() => this.onClickDialAction(action)}\n          />\n        ))}\n      </SpeedDial>)}\n\n      {currentOrder && currentOrder.status === O.OrderState.PENDING && (\n        <div className=\"fab-actions\">\n\n          <Fab size=\"large\" color=\"default\" onClick={() => this.setState({ openRefusedDialog: true })} aria-label=\"add\" className=\"fab-cancelled\">\n            <CloseIcon />\n          </Fab>\n\n          <Fab size=\"large\" color=\"secondary\" onClick={() => this.setState({ openVerifiedDialog: true })} aria-label=\"add\" className=\"fab-verified\">\n            <CheckIcon />\n          </Fab>\n\n        </div>\n      )}\n\n    </div>);\n  }\n}\n\nexport default withStyles(useStyles)(Order);\n","import React from 'react';\nimport './Error.scss';\nimport MenuApp from '../../components/menu-app';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport conf from '../../confs';\n\nfunction Error(props: any) {\n  return (\n    <div className=\"error\">\n      <MenuApp mode=\"light\" history={props.history} />\n\n      <div className=\"area\">\n        <BugReportIcon />\n        <Typography variant=\"h4\">Une erreur est survenue</Typography>\n        <Button color=\"secondary\" onClick={() => window.open(conf.support)}>Déposer un ticket</Button>\n      </div>\n    </div>\n  );\n}\n\nexport default Error;\n","import React from 'react';\nimport './Catalog.scss';\nimport MenuApp from '../../components/menu-app';\nimport { Subscription } from 'rxjs';\nimport makerStore from '../../stores/maker';\nimport { Product } from '../../models/product';\nimport { withStyles, Theme } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport AddIcon from '@material-ui/icons/Add';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Avatar from '@material-ui/core/Avatar';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckIcon from '@material-ui/icons/Check';\nimport Modal from '@material-ui/core/Modal';\nimport Grid from '@material-ui/core/Grid';\nimport Fab from '@material-ui/core/Fab';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { Item } from '../../models/item';\nimport conf from '../../confs';\nimport { grey, green,common } from '@material-ui/core/colors';\nimport Paper from '@material-ui/core/Paper';\nimport { Maker } from '../../models/maker';\nimport { Order } from '../../models/order';\n\n\ninterface GraphicProduct extends Product {\n  category?: Item\n}\n\nconst useStyles = (theme: Theme) => ({\n  grey:{\n    color: theme.palette.getContrastText(grey[500]),\n    backgroundColor: grey[500],\n  },\n  green:{\n    color: common.white,\n    backgroundColor: green[500],\n  }\n});\n\nclass Catalog extends React.Component<{ history: any, match: any, classes:any }, { products: GraphicProduct[], openPreview: string, maker: Maker | null, activeIndex: number, wantToAdd: Product | null, openCleanCart: boolean, cart: Order | null }>{\n\n  state = { products: [], openCleanCart: false, activeIndex: -1, maker: null, openPreview: '', cart: null, wantToAdd: null };\n  subMaker: Subscription | null = null;\n\n  componentWillUnmount() {\n    this.subMaker?.unsubscribe();\n  }\n\n  componentDidMount() {\n    this.subMaker = makerStore.subscribe((maker: Maker) => {\n      if(maker){\n        const products = (maker.products || []).map((p: GraphicProduct) => {\n          p.category = conf.categories.find(c => c.id === p.categoryId);\n          return p;\n        });\n\n        this.setState({\n          maker, products\n        })\n      }\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"maker\">\n        <MenuApp mode=\"catalog\" history={this.props.history} />\n\n        <Fab size=\"large\" onClick={() => this.props.history.push(`/products/0000`)} color=\"primary\" className=\"add-product\"  aria-label=\"add product\">\n          <AddIcon />\n        </Fab>\n\n        <Modal\n          open={!!this.state.openPreview}\n          onClose={() => this.setState({ openPreview: '' })}\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n        >\n          <Paper className=\"preview-paper\" onClick={() => this.setState({ openPreview: '' })}>\n            <img src={this.state.openPreview} alt=\"preview\" />\n          </Paper>\n        </Modal>\n\n        <Grid className=\"products-grid\" container alignContent=\"center\" alignItems=\"center\" justify=\"center\" spacing={0}>\n          {this.state.products.map((p: GraphicProduct, i: number) => (\n            <Grid item key={i}>\n              <Card className=\"product-card\" >\n                {p.available && (<CardHeader\n                  title={p.label}\n                  subheader={p.category?.label}\n                  avatar={\n                    <Avatar aria-label=\"recipe\" className={this.props.classes.green}><CheckIcon/></Avatar>\n                  }\n                />)}{!p.available && (<CardHeader\n                  title={p.label}\n                  subheader={p.category?.label}\n                  avatar={\n                    <Avatar aria-label=\"recipe\" className={this.props.classes.grey}><ClearIcon/></Avatar>\n                  }\n                />)}\n                <CardMedia onClick={() => this.setState({ openPreview: p.image })}\n                  component=\"img\"\n                  alt=\"product\"\n                  height=\"140\"\n                  className=\"maker-media\"\n                  image={p.image}\n                  title={p.label}\n                />\n                <CardContent className=\"content-price\">\n                <Fab size=\"large\" onClick={() => this.props.history.push(`/products/${p.ref}`)} color=\"secondary\" className=\"look-product\"  aria-label=\"edit product\">\n                    <SearchIcon />\n                  </Fab>\n                </CardContent>\n                <CardActions disableSpacing className=\"cardaction-product\">\n                <Typography className=\"typo-price\" variant=\"h5\" color=\"textSecondary\">\n                    <div className=\"price\">\n                      {parseFloat(`${p.price}`).toFixed(2)}<sup>€</sup>\n                    </div>\n                    \n                  </Typography>\n                  <IconButton\n                    className={(this.state.activeIndex === i ? 'expandOpen' : 'expanded')}\n                    onClick={() => this.state.activeIndex === i ? this.setState({ activeIndex: -1 }) : this.setState({ activeIndex: i })}\n                    aria-expanded={this.state.activeIndex === i}\n                    aria-label=\"voir plus\"\n                  >\n                    <ExpandMoreIcon />\n                  </IconButton>\n                </CardActions>\n                <Collapse in={this.state.activeIndex === i} timeout=\"auto\" unmountOnExit>\n                  <CardContent>\n                    {p.volume && (<Typography className=\"my-p\" paragraph>Volume: {parseFloat(`${p.volume}`).toFixed(2)}L</Typography>)}\n                    {p.weight && (<Typography className=\"my-p\" paragraph>Poids: {p.weight > 1000 ? parseFloat(`${p.weight / 1000}`).toFixed(1) + 'k' : parseFloat(`${p.weight}`).toFixed(0)}g</Typography>)}\n\n                    {p.description && (<Typography className=\"my-p\" paragraph>\n                      {p.description}\n                    </Typography>)}\n\n                  </CardContent>\n                </Collapse>\n              </Card>\n            </Grid>\n\n          ))}\n\n\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(useStyles)(Catalog);\n\n","import React from 'react';\nimport { Subscription } from 'rxjs';\nimport makerStore from '../../stores/maker';\nimport { Maker } from '../../models/maker';\nimport * as P from '../../models/product';\nimport MenuApp from '../../components/menu-app';\n\nclass Product extends React.Component<{ history: any, match:any }, { maker:Maker|null, product: P.Product|null  }>{\n\n  state = {maker:null, product:null};\n  subMaker: Subscription | null = null;\n\n  componentWillUnmount() {\n    this.subMaker?.unsubscribe();\n  }\n\n  componentDidMount() {\n    const ref: string = this.props.match.params.id;\n\n    this.subMaker = makerStore.subscribe((maker: Maker) => {\n      if (maker) {\n        const product: any = (maker.products || []).filter(p => p.ref === ref);\n        console.log(product);\n        this.setState({ maker, product: product || null });\n      }\n    });\n  }\n\n  render(){\n    const product : P.Product = (this.state.product as any);\n    return <div className=\"product\">\n      <MenuApp mode=\"light\" history={this.props.history} />\n\n      {this.state.product && (<div className=\"area\">\n\n        <div className=\"image\">\n          <img src={product.image} alt=\"apercu produit\"/>\n        </div>\n      </div>)}\n      \n  </div>;\n  }\n}\n\nexport default Product;\n","import React from 'react';\nimport './App.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Login from './views/login';\nimport PrivateRoute from './components/private-route';\nimport NoMatch from './views/no-match';\nimport { Subscription } from 'rxjs';\nimport httpClientService from './services/http-client.service';\nimport fcmService from './services/fcm.service';\nimport * as moment from 'moment';\nimport 'moment/locale/fr';\nimport MyOrders from './views/my-orders';\nimport Order from './views/order';\nimport Error from './views/error';\nimport Catalog from './views/catalog';\nimport Product from './views/product';\n\n\n// @see https://material-ui.com/customization/palette/\n//const theme = createMuiTheme({ \"palette\": { \"common\": { \"black\": \"#000\", \"white\": \"#fff\" }, \"background\": { \"paper\": \"#fff\", \"default\": \"#fafafa\" }, \"primary\": { \"light\": \"rgba(48, 49, 49, 0.84)\", \"main\": \"rgba(48, 49, 49, 1)\", \"dark\": \"rgba(38, 39, 39, 1)\", \"contrastText\": \"#fff\" }, \"secondary\": { \"light\": \"rgba(118, 143, 255, 1)\", \"main\": \"rgba(41, 98, 255, 1)\", \"dark\": \"rgba(0, 57, 203, 1)\", \"contrastText\": \"#fff\" }, \"error\": { \"light\": \"#e57373\", \"main\": \"#f44336\", \"dark\": \"#d32f2f\", \"contrastText\": \"#fff\" }, \"text\": { \"primary\": \"rgba(0, 0, 0, 0.87)\", \"secondary\": \"rgba(0, 0, 0, 0.54)\", \"disabled\": \"rgba(0, 0, 0, 0.38)\", \"hint\": \"rgba(0, 0, 0, 0.38)\" } } });\nconst theme = createMuiTheme({\"palette\":{\"common\":{\"black\":\"#000\",\"white\":\"#fff\"},\"background\":{\"paper\":\"#fff\",\"default\":\"#fafafa\"},\"primary\":{\"light\":\"rgba(74, 74, 74, 0.77)\",\"main\":\"rgba(74, 74, 74, 1)\",\"dark\":\"rgba(61, 61, 62, 1)\",\"contrastText\":\"#fff\"},\"secondary\":{\"light\":\"rgba(255, 102, 0, 0.79)\",\"main\":\"rgba(255, 102, 0, 1)\",\"dark\":\"rgba(192, 77, 0, 1)\",\"contrastText\":\"#fff\"},\"error\":{\"light\":\"#e57373\",\"main\":\"#f44336\",\"dark\":\"#d32f2f\",\"contrastText\":\"#fff\"},\"text\":{\"primary\":\"rgba(0, 0, 0, 0.87)\",\"secondary\":\"rgba(0, 0, 0, 0.54)\",\"disabled\":\"rgba(0, 0, 0, 0.38)\",\"hint\":\"rgba(0, 0, 0, 0.38)\"}}});\n\n\nclass App extends React.Component<{}, { concurrentCalls: number }>{\n\n  state = { concurrentCalls: 0 };\n  subHttpClientRequest: Subscription | null = null;\n  subHttpClientResponse: Subscription | null = null;\n\n  componentDidMount() {\n    fcmService.init();\n    moment.locale('fr');\n    this.subHttpClientRequest = httpClientService.subOnRequest(() => {\n      ///this.setState({ concurrentCalls: this.state.concurrentCalls + 1 });\n    });\n    this.subHttpClientResponse = httpClientService.subOnResponse(() => {\n      if (this.state.concurrentCalls > 0) {\n        //this.setState({ concurrentCalls: this.state.concurrentCalls - 1 });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.subHttpClientRequest?.unsubscribe();\n    this.subHttpClientResponse?.unsubscribe();\n  }\n\n  render() {\n    return (\n      <MuiThemeProvider theme={theme}>\n\n        <Backdrop className=\"backdrop\" open={this.state.concurrentCalls !== 0}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        <Router>\n          <Switch>\n            {/*<Route exact path=\"/\" render={(routeProps) => <Makers {...routeProps} />} />*/}\n\n            \n\n            <Route path=\"/login\" component={Login} />         \n            <PrivateRoute exact path=\"/\" component={MyOrders} /> \n            <PrivateRoute exact path=\"/my-orders/:id\" component={Order} />           \n            <PrivateRoute exact path=\"/products\" component={Catalog} />   \n            <PrivateRoute exact path=\"/products/:id\" component={Product} />   \n\n            <Route path=\"/error\" component={Error} />\n            <Route path=\"*\" component={NoMatch} />\n          </Switch>\n        </Router>\n      </MuiThemeProvider>\n    );\n  }\n}\nexport default App;\n\n\n// @see https://reacttraining.com/react-router/web/guides/primary-components\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport  { BrowserRouter } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport './array.sortBy';\n//import './serviceWorker';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n"],"sourceRoot":""}